<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TravelTalk - äº”åœ‹èªè¨€å…¨åŠŸèƒ½ç‰ˆ (æœå°‹+æ”¶è—)</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 512 512%22><path fill=%22%232563eb%22 d=%22M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4l0 0 0 0c31.4-31.6 63.9-61.1 63.9-61.1c-16-16.7-28.8-35.3-37.3-55.3C10.7 308.1 0 274.9 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z%22/></svg>">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+KR:wght@400;700&family=Kanit:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f3f4f6; -webkit-tap-highlight-color: transparent; }
        .font-jp { font-family: 'Noto Sans JP', sans-serif; }
        .font-kr { font-family: 'Noto Sans KR', sans-serif; }
        .font-th { font-family: 'Kanit', sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .tab-active {
            background-color: #2563eb;
            color: white;
            border-color: #2563eb;
        }
        .tab-inactive {
            background-color: #1f2937;
            color: #9ca3af;
            border-color: #374151;
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden max-w-md mx-auto bg-white shadow-xl relative">

    <!-- Header -->
    <header class="bg-blue-600 text-white p-4 pb-2 flex justify-between items-center shadow-md z-20 shrink-0">
        <div class="flex items-center gap-2">
            <i class="fa-solid fa-comments text-2xl"></i>
            <div>
                <h1 class="text-xl font-bold leading-none">TravelTalk</h1>
                <p class="text-[10px] text-blue-100 opacity-90">å°ç£è¦–è§’å‡ºç™¼ â€¢ ä¸­è‹±æ—¥éŸ“æ³°äº¤æµåŠ©æ‰‹</p>
            </div>
        </div>
        <button onclick="showInfo()" class="text-white hover:text-blue-200"><i class="fa-solid fa-circle-info text-xl"></i></button>
    </header>

    <!-- Search Bar -->
    <div class="bg-blue-600 px-4 pb-4 pt-1 z-10 shrink-0">
        <div class="relative">
            <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            <input type="text" id="search-input" placeholder="æœå°‹é—œéµå­— (ä¾‹å¦‚: å»æ‰€, price)" 
                class="w-full pl-10 pr-4 py-2 rounded-lg text-sm text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-300 shadow-inner"
                oninput="handleSearch()">
            <button id="clear-search" onclick="clearSearch()" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 hidden">
                <i class="fa-solid fa-circle-xmark"></i>
            </button>
        </div>
    </div>

    <!-- Categories -->
    <div class="bg-white border-b border-gray-200 shrink-0">
        <div class="flex overflow-x-auto no-scrollbar p-2 space-x-2" id="category-container"></div>
    </div>

    <!-- Content List -->
    <main class="flex-1 overflow-y-auto p-4 bg-gray-50 pb-24" id="content-list"></main>

    <!-- Footer -->
    <footer class="bg-gray-100 text-gray-500 text-xs text-center p-2 border-t shrink-0">
        <p>é»æ“Šå¡ç‰‡é–‹å•Ÿå°è©± â€¢ é»æ“Š <i class="fa-regular fa-star text-yellow-500"></i> åŠ å…¥å¸¸ç”¨</p>
    </footer>

    <!-- MAIN MODAL -->
    <div id="translation-modal" onclick="if(event.target === this) closeModal()" class="fixed inset-0 z-50 hidden bg-black/95 flex-col justify-start items-center p-6 text-white transition-all duration-300 backdrop-blur-sm pt-8 overflow-y-auto cursor-pointer">
        
        <button onclick="closeModal()" class="fixed top-6 right-6 w-10 h-10 flex items-center justify-center bg-gray-700/80 rounded-full text-white hover:bg-gray-600 z-[60] shadow-lg border border-gray-500 backdrop-blur-md">
            <i class="fa-solid fa-xmark text-xl"></i>
        </button>

        <div class="w-full max-w-sm space-y-4 text-center relative mt-6 cursor-auto pb-12">
            
            <div id="modal-switcher" class="hidden grid-cols-4 gap-2 mb-4"></div>

            <div class="border-b border-gray-700 pb-2 mb-2 flex flex-col items-center">
                <p class="text-gray-400 text-xs mb-1">æ‚¨çš„æ„æ€ / You mean</p>
                <h2 id="modal-zh" class="text-2xl font-bold text-white leading-snug">ä¸­æ–‡å…§å®¹</h2>
            </div>

            <!-- Language Cards -->
            <div onclick="playAudio('en')" class="bg-gray-800 p-3 rounded-xl cursor-pointer hover:bg-gray-700 border border-gray-700 active:scale-[0.98] transition shadow-lg relative group">
                <div class="flex justify-between items-start mb-1">
                    <span class="text-[10px] text-green-400 font-bold uppercase tracking-wider bg-green-900/30 px-2 py-0.5 rounded">English</span>
                    <i class="fa-solid fa-volume-high text-green-400/50 group-hover:text-green-400 transition"></i>
                </div>
                <p id="modal-en" class="text-lg font-bold text-gray-100 leading-snug text-left">English Text</p>
            </div>

            <div onclick="playAudio('ja')" class="bg-gray-800 p-3 rounded-xl cursor-pointer hover:bg-gray-700 border border-gray-700 active:scale-[0.98] transition shadow-lg relative group">
                <div class="flex justify-between items-start mb-1">
                    <span class="text-[10px] text-pink-400 font-bold uppercase tracking-wider bg-pink-900/30 px-2 py-0.5 rounded">æ—¥æœ¬èª</span>
                    <i class="fa-solid fa-volume-high text-pink-400/50 group-hover:text-pink-400 transition"></i>
                </div>
                <p id="modal-jp" class="text-xl font-bold font-jp text-gray-100 leading-snug text-left">æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆ</p>
            </div>

            <div onclick="playAudio('ko')" class="bg-gray-800 p-3 rounded-xl cursor-pointer hover:bg-gray-700 border border-gray-700 active:scale-[0.98] transition shadow-lg relative group">
                <div class="flex justify-between items-start mb-1">
                    <span class="text-[10px] text-yellow-400 font-bold uppercase tracking-wider bg-yellow-900/30 px-2 py-0.5 rounded">í•œêµ­ì–´</span>
                    <i class="fa-solid fa-volume-high text-yellow-400/50 group-hover:text-yellow-400 transition"></i>
                </div>
                <p id="modal-kr" class="text-xl font-bold font-kr text-gray-100 leading-snug text-left">í•œêµ­ì–´ í…ìŠ¤íŠ¸</p>
            </div>

            <div onclick="playAudio('th')" class="bg-gray-800 p-3 rounded-xl cursor-pointer hover:bg-gray-700 border border-gray-700 active:scale-[0.98] transition shadow-lg relative group">
                <div class="flex justify-between items-start mb-1">
                    <span class="text-[10px] text-purple-400 font-bold uppercase tracking-wider bg-purple-900/30 px-2 py-0.5 rounded">à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</span>
                    <i class="fa-solid fa-volume-high text-purple-400/50 group-hover:text-purple-400 transition"></i>
                </div>
                <p id="modal-th" class="text-xl font-bold font-th text-gray-100 leading-snug text-left">à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</p>
            </div>
            
        </div>
    </div>

    <!-- Info Modal -->
    <div id="info-modal" onclick="if(event.target === this) document.getElementById('info-modal').classList.add('hidden')" class="fixed inset-0 z-50 hidden bg-black/50 flex justify-center items-center p-4 backdrop-blur-sm cursor-pointer">
        <div class="bg-white rounded-xl p-6 max-w-sm w-full shadow-2xl cursor-auto relative">
            <h3 class="text-xl font-bold text-gray-800 mb-2">ä½¿ç”¨èªªæ˜</h3>
            <ul class="list-disc list-inside text-gray-600 text-sm space-y-1 mb-4">
                <li><i class="fa-solid fa-star text-yellow-500"></i> é»æ“Šæ˜Ÿæ˜Ÿå¯åŠ å…¥ã€Œå¸¸ç”¨ã€åˆ—è¡¨ï¼Œä¸¦ç½®é ‚é¡¯ç¤ºã€‚</li>
                <li><i class="fa-solid fa-magnifying-glass text-gray-400"></i> ä¸Šæ–¹æœå°‹æ¡†å¯å¿«é€ŸæŸ¥æ‰¾å°è©±ã€‚</li>
                <li>æ”¯æ´ä¸­ã€è‹±ã€æ—¥ã€éŸ“ã€æ³°äº”èªç™¼éŸ³ã€‚</li>
            </ul>
            <div class="bg-orange-50 border-l-4 border-orange-400 p-3 mt-3 rounded">
                <p class="text-orange-800 text-xs font-bold mb-2">ğŸ“± èªéŸ³åŒ…ä¸‹è¼‰æé†’</p>
                <p class="text-orange-700 text-xs">â€¢ iPhone: è¨­å®š > è¼”åŠ©ä½¿ç”¨ > èªéŸ³å…§å®¹ > è²éŸ³</p>
                <p class="text-orange-700 text-xs">â€¢ Android: è¨­å®š > ç³»çµ± > èªè¨€å’Œè¼¸å…¥ > æ–‡å­—è½‰èªéŸ³è¼¸å‡º</p>
                <p class="text-orange-600 text-[10px] mt-2">*è‹¥ç„¡è²éŸ³æˆ–ç™¼éŸ³éŒ¯èª¤ï¼Œè«‹ç¢ºèªå·²ä¸‹è¼‰å°æ‡‰èªè¨€çš„èªéŸ³åŒ…</p>
            </div>

            <button onclick="checkVoiceAvailability()" class="w-full bg-gray-600 text-white py-3 rounded-lg font-bold mt-3 flex items-center justify-center gap-2">
                <i class="fa-solid fa-check-circle"></i>
                æª¢æ¸¬èªéŸ³åŒ…å®‰è£ç‹€æ…‹
            </button>

            <button onclick="document.getElementById('info-modal').classList.add('hidden')" class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold mt-2">äº†è§£</button>
            
            <!-- Version Number -->
            <p class="text-gray-300 text-[10px] text-center mt-3">Ver 1.0.0</p>
        </div>
    </div>

    <script>
        // --- æ ¸å¿ƒè³‡æ–™åº« (åŠ å…¥å”¯ä¸€ ID) ---
        // ID å‘½åè¦å‰‡ï¼šcategory-keyword (ä¾‹å¦‚: interaction-welcome)
        const phrases = [
            // --- äº’å‹•/æºé€š (Interaction) ---
            { 
                id: 'int-welcome',
                category: 'interaction', 
                isDynamic: true,
                title: 'æ­¡è¿ä¾†åˆ°...(åœ‹å®¶)', 
                options: [
                    { label: 'å°ç£', zh: 'æ­¡è¿ä¾†åˆ°å°ç£ï¼', en: 'Welcome to Taiwan!', jp: 'å°æ¹¾ã¸ã‚ˆã†ã“ãï¼', kr: 'ëŒ€ë§Œì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!', th: 'à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸šà¸ªà¸¹à¹ˆà¹„à¸•à¹‰à¸«à¸§à¸±à¸™!' },
                    { label: 'æ—¥æœ¬', zh: 'æ­¡è¿ä¾†åˆ°æ—¥æœ¬ï¼', en: 'Welcome to Japan!', jp: 'æ—¥æœ¬ã¸ã‚ˆã†ã“ãï¼', kr: 'ì¼ë³¸ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!', th: 'à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸šà¸ªà¸¹à¹ˆà¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™!' },
                    { label: 'éŸ“åœ‹', zh: 'æ­¡è¿ä¾†åˆ°éŸ“åœ‹ï¼', en: 'Welcome to Korea!', jp: 'éŸ“å›½ã¸ã‚ˆã†ã“ãï¼', kr: 'í•œêµ­ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!', th: 'à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸šà¸ªà¸¹à¹ˆà¹€à¸à¸²à¸«à¸¥à¸µ!' },
                    { label: 'æ³°åœ‹', zh: 'æ­¡è¿ä¾†åˆ°æ³°åœ‹ï¼', en: 'Welcome to Thailand!', jp: 'ã‚¿ã‚¤ã¸ã‚ˆã†ã“ãï¼', kr: 'íƒœêµ­ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!', th: 'à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸šà¸ªà¸¹à¹ˆà¸›à¸£à¸°à¹€à¸—à¸¨à¹„à¸—à¸¢!' },
                    { label: 'ç¾åœ‹', zh: 'æ­¡è¿ä¾†åˆ°ç¾åœ‹ï¼', en: 'Welcome to the USA!', jp: 'ã‚¢ãƒ¡ãƒªã‚«ã¸ã‚ˆã†ã“ãï¼', kr: 'ë¯¸êµ­ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!', th: 'à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸šà¸ªà¸¹à¹ˆà¸­à¹€à¸¡à¸£à¸´à¸à¸²!' }
                ]
            },
            { 
                id: 'int-speak-lang',
                category: 'interaction', 
                isDynamic: true,
                title: 'ä½ æœƒèªª...(èªè¨€)å—ï¼Ÿ', 
                options: [
                    { label: 'ä¸­æ–‡', zh: 'ä½ æœƒèªªä¸­æ–‡å—ï¼Ÿ', en: 'Do you speak Chinese?', jp: 'ä¸­å›½èªã‚’è©±ã›ã¾ã™ã‹ï¼Ÿ', kr: 'ì¤‘êµ­ì–´ í•˜ì„¸ìš”?', th: 'à¸„à¸¸à¸“à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¸ˆà¸µà¸™à¹„à¸”à¹‰à¹„à¸«à¸¡?' },
                    { label: 'è‹±æ–‡', zh: 'ä½ æœƒèªªè‹±æ–‡å—ï¼Ÿ', en: 'Do you speak English?', jp: 'è‹±èªã‚’è©±ã›ã¾ã™ã‹ï¼Ÿ', kr: 'ì˜ì–´ í•˜ì„¸ìš”?', th: 'à¸„à¸¸à¸“à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¸­à¸±à¸‡à¸à¸¤à¸©à¹„à¸”à¹‰à¹„à¸«à¸¡?' },
                    { label: 'æ—¥æ–‡', zh: 'ä½ æœƒèªªæ—¥æ–‡å—ï¼Ÿ', en: 'Do you speak Japanese?', jp: 'æ—¥æœ¬èªã‚’è©±ã›ã¾ã™ã‹ï¼Ÿ', kr: 'ì¼ë³¸ì–´ í•˜ì„¸ìš”?', th: 'à¸„à¸¸à¸“à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™à¹„à¸”à¹‰à¹„à¸«à¸¡?' },
                    { label: 'éŸ“æ–‡', zh: 'ä½ æœƒèªªéŸ“æ–‡å—ï¼Ÿ', en: 'Do you speak Korean?', jp: 'í•œêµ­ì–´ í•˜ì„¸ìš”?', th: 'à¸„à¸¸à¸“à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¹€à¸à¸²à¸«à¸¥à¸µà¹„à¸”à¹‰à¹„à¸«à¸¡?' },
                    { label: 'æ³°æ–‡', zh: 'ä½ æœƒèªªæ³°æ–‡å—ï¼Ÿ', en: 'Do you speak Thai?', jp: 'ã‚¿ã‚¤èªã‚’è©±ã›ã¾ã™ã‹ï¼Ÿ', kr: 'íƒœêµ­ì–´ í•˜ì„¸ìš”?', th: 'à¸„à¸¸à¸“à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¹„à¸—à¸¢à¹„à¸”à¹‰à¹„à¸«à¸¡?' }
                ]
            },
            { 
                id: 'int-cant-speak',
                category: 'interaction', 
                isDynamic: true,
                title: 'æˆ‘ä¸æœƒèªª...(èªè¨€)', 
                options: [
                    { label: 'ä¸­æ–‡', zh: 'æˆ‘ä¸æœƒèªªä¸­æ–‡', en: 'I don\'t speak Chinese.', jp: 'ä¸­å›½èªã¯è©±ã›ã¾ã›ã‚“ã€‚', kr: 'ì¤‘êµ­ì–´ë¥¼ ëª»í•©ë‹ˆë‹¤.', th: 'à¸‰à¸±à¸™à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¸ˆà¸µà¸™à¹„à¸¡à¹ˆà¹„à¸”à¹‰' },
                    { label: 'è‹±æ–‡', zh: 'æˆ‘ä¸æœƒèªªè‹±æ–‡', en: 'I don\'t speak English.', jp: 'è‹±èªã¯è©±ã›ã¾ã›ã‚“ã€‚', kr: 'ì˜ì–´ë¥¼ ëª»í•©ë‹ˆë‹¤.', th: 'à¸‰à¸±à¸™à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¸­à¸±à¸‡à¸à¸¤à¸©à¹„à¸¡à¹ˆà¹„à¸”à¹‰' },
                    { label: 'æ—¥æ–‡', zh: 'æˆ‘ä¸æœƒèªªæ—¥æ–‡', en: 'I don\'t speak Japanese.', jp: 'æ—¥æœ¬èªã¯è©±ã›ã¾ã›ã‚“ã€‚', kr: 'ì¼ë³¸ì–´ë¥¼ ëª»í•©ë‹ˆë‹¤.', th: 'à¸‰à¸±à¸™à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™à¹„à¸¡à¹ˆà¹„à¸”à¹‰' },
                    { label: 'éŸ“æ–‡', zh: 'æˆ‘ä¸æœƒèªªéŸ“æ–‡', en: 'I don\'t speak Korean.', jp: 'í•œêµ­ì–´ë¥¼ ëª»í•©ë‹ˆë‹¤.', th: 'à¸‰à¸±à¸™à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¹€à¸à¸²à¸«à¸¥à¸µà¹„à¸¡à¹ˆà¹„à¸”à¹‰' },
                    { label: 'æ³°æ–‡', zh: 'æˆ‘ä¸æœƒèªªæ³°æ–‡', en: 'I don\'t speak Thai.', jp: 'ã‚¿ã‚¤èªã¯è©±ã›ã¾ã›ã‚“ã€‚', kr: 'íƒœêµ­ì–´ë¥¼ ëª»í•©ë‹ˆë‹¤.', th: 'à¸‰à¸±à¸™à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¹„à¸—à¸¢à¹„à¸¡à¹ˆà¹„à¸”à¹‰' }
                ]
            },
            { 
                id: 'int-pls-speak',
                category: 'interaction', 
                isDynamic: true,
                title: 'è«‹èªª...(èªè¨€)', 
                options: [
                    { label: 'ä¸­æ–‡', zh: 'è«‹èªªä¸­æ–‡', en: 'Please speak Chinese.', jp: 'ä¸­å›½èªã§è©±ã—ã¦ãã ã•ã„ã€‚', kr: 'ì¤‘êµ­ì–´ë¡œ ë§í•´ì£¼ì„¸ìš”.', th: 'à¸à¸£à¸¸à¸“à¸²à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¸ˆà¸µà¸™' },
                    { label: 'è‹±æ–‡', zh: 'è«‹èªªè‹±æ–‡', en: 'Please speak English.', jp: 'è‹±èªã§è©±ã—ã¦ãã ã•ã„ã€‚', kr: 'ì˜ì–´ë¡œ ë§í•´ì£¼ì„¸ìš”.', th: 'à¸à¸£à¸¸à¸“à¸²à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¸­à¸±à¸‡à¸à¸¤à¸©' },
                    { label: 'æ…¢ä¸€é»', zh: 'è«‹èªªæ…¢ä¸€é»', en: 'Please speak slowly.', jp: 'ã‚‚ã£ã¨ã‚†ã£ãã‚Šè©±ã—ã¦ãã ã•ã„ã€‚', kr: 'ì²œì²œíˆ ë§í•´ì£¼ì„¸ìš”.', th: 'à¸à¸£à¸¸à¸“à¸²à¸à¸¹à¸”à¸Šà¹‰à¸²à¹†' },
                    { label: 'æ³°æ–‡', zh: 'è«‹èªªæ³°æ–‡', en: 'Please speak Thai.', jp: 'ã‚¿ã‚¤èªã§è©±ã—ã¦ãã ã•ã„ã€‚', kr: 'íƒœêµ­ì–´ë¡œ ë§í•´ì£¼ì„¸ìš”.', th: 'à¸à¸£à¸¸à¸“à¸²à¸à¸¹à¸”à¸ à¸²à¸©à¸²à¹„à¸—à¸¢' }
                ]
            },
            { id: 'int-dont-understand', category: 'interaction', zh: 'æˆ‘è½ä¸æ‡‚', en: 'I don\'t understand.', jp: 'ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚', kr: 'ì´í•´ë¥¼ ëª» í–ˆì–´ìš”.', th: 'à¸‰à¸±à¸™à¹„à¸¡à¹ˆà¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ' },
            { id: 'int-google-trans', category: 'interaction', zh: 'è«‹ç”¨Googleç¿»è­¯', en: 'Please use Google Translate.', jp: 'Googleç¿»è¨³ã‚’ä½¿ã£ã¦ãã ã•ã„ã€‚', kr: 'êµ¬ê¸€ ë²ˆì—­ê¸°ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.', th: 'à¸à¸£à¸¸à¸“à¸²à¹ƒà¸Šà¹‰ Google Translate' },

            // --- é¤å»³/é£²é£Ÿ (Dining) ---
            { 
                id: 'dine-people',
                category: 'dining', 
                isDynamic: true,
                title: 'æˆ‘å€‘æœ‰...ä½ (äººæ•¸)', 
                options: [
                    { label: '1ä½', zh: 'ä¸€ä½', en: 'Table for one.', jp: '1åã§ã™ã€‚', kr: 'í•œ ëª…ì…ë‹ˆë‹¤.', th: '1 à¸—à¹ˆà¸²à¸™' },
                    { label: '2ä½', zh: 'å…©ä½', en: 'Table for two.', jp: '2åã§ã™ã€‚', kr: 'ë‘ ëª…ì…ë‹ˆë‹¤.', th: '2 à¸—à¹ˆà¸²à¸™' },
                    { label: '3ä½', zh: 'ä¸‰ä½', en: 'Table for three.', jp: '3åã§ã™ã€‚', kr: 'ì„¸ ëª…ì…ë‹ˆë‹¤.', th: '3 à¸—à¹ˆà¸²à¸™' },
                    { label: '4ä½', zh: 'å››ä½', en: 'Table for four.', jp: '4åã§ã™ã€‚', kr: 'ë„¤ ëª…ì…ë‹ˆë‹¤.', th: '4 à¸—à¹ˆà¸²à¸™' }
                ]
            },
            { id: 'dine-menu', category: 'dining', zh: 'è«‹çµ¦æˆ‘èœå–®', en: 'Menu, please.', jp: 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãã ã•ã„ã€‚', kr: 'ë©”ë‰´íŒ ì£¼ì„¸ìš”.', th: 'à¸‚à¸­à¹€à¸¡à¸™à¸¹à¸«à¸™à¹ˆà¸­à¸¢' },
            { id: 'dine-recommend', category: 'dining', zh: 'è«‹æ¨è–¦å¥½åƒçš„', en: 'What do you recommend?', jp: 'ãŠã™ã™ã‚ã¯ä½•ã§ã™ã‹ï¼Ÿ', kr: 'ì¶”ì²œ ë©”ë‰´ ìˆë‚˜ìš”?', th: 'à¸¡à¸µà¸­à¸°à¹„à¸£à¹à¸™à¸°à¸™à¸³à¸šà¹‰à¸²à¸‡?' },
            { 
                id: 'dine-diet',
                category: 'dining', 
                isDynamic: true,
                title: 'æˆ‘ä¸åƒ... (é£²é£Ÿç¦å¿Œ)', 
                options: [
                    { label: 'ç”Ÿé£Ÿ', zh: 'æˆ‘ä¸åƒç”Ÿé£Ÿ', en: 'I don\'t eat raw food.', jp: 'ç”Ÿã‚‚ã®ã¯é£Ÿã¹ã‚‰ã‚Œã¾ã›ã‚“ã€‚', kr: 'ë‚ ê²ƒì€ ëª» ë¨¹ìŠµë‹ˆë‹¤.', th: 'à¸‰à¸±à¸™à¹„à¸¡à¹ˆà¸à¸´à¸™à¸‚à¸­à¸‡à¸”à¸´à¸š' }, 
                    { label: 'è±¬è‚‰', zh: 'æˆ‘ä¸åƒè±¬è‚‰', en: 'I don\'t eat pork.', jp: 'è±šè‚‰ã¯é£Ÿã¹ã‚‰ã‚Œã¾ã›ã‚“ã€‚', kr: 'ë¼ì§€ê³ ê¸°ëŠ” ëª» ë¨¹ìŠµë‹ˆë‹¤.', th: 'à¸‰à¸±à¸™à¹„à¸¡à¹ˆà¸à¸´à¸™à¸«à¸¡à¸¹' },
                    { label: 'ç‰›è‚‰', zh: 'æˆ‘ä¸åƒç‰›è‚‰', en: 'I don\'t eat beef.', jp: 'ç‰›è‚‰ã¯é£Ÿã¹ã‚‰ã‚Œã¾ã›ã‚“ã€‚', kr: 'ì†Œê³ ê¸°ëŠ” ëª» ë¨¹ìŠµë‹ˆë‹¤.', th: 'à¸‰à¸±à¸™à¹„à¸¡à¹ˆà¸à¸´à¸™à¹€à¸™à¸·à¹‰à¸­à¸§à¸±à¸§' },
                    { label: 'æµ·é®®', zh: 'æˆ‘ä¸åƒæµ·é®®', en: 'I don\'t eat seafood.', jp: 'ã‚·ãƒ¼ãƒ•ãƒ¼ãƒ‰ã¯é£Ÿã¹ã‚‰ã‚Œã¾ã›ã‚“ã€‚', kr: 'í•´ì‚°ë¬¼ì€ ëª» ë¨¹ìŠµë‹ˆë‹¤.', th: 'à¸‰à¸±à¸™à¹„à¸¡à¹ˆà¸à¸´à¸™à¸­à¸²à¸«à¸²à¸£à¸—à¸°à¹€à¸¥' },
                    { label: 'åƒç´ ', zh: 'æˆ‘åƒç´ ', en: 'I am vegetarian.', jp: 'ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³ã§ã™ã€‚', kr: 'ì €ëŠ” ì±„ì‹ì£¼ì˜ìì…ë‹ˆë‹¤.', th: 'à¸‰à¸±à¸™à¸à¸´à¸™à¹€à¸ˆ' }
                ]
            },
            { id: 'dine-no-coriander', category: 'dining', zh: 'ä¸è¦é¦™èœ', en: 'No coriander / cilantro.', jp: 'ãƒ‘ã‚¯ãƒãƒ¼æŠœãã§ãŠé¡˜ã„ã—ã¾ã™ã€‚', kr: 'ê³ ìˆ˜ëŠ” ë¹¼ì£¼ì„¸ìš”.', th: 'à¹„à¸¡à¹ˆà¹ƒà¸ªà¹ˆà¸œà¸±à¸à¸Šà¸µ' },
            { id: 'dine-spicy', category: 'dining', zh: 'é€™æœƒè¾£å—ï¼Ÿ', en: 'Is this spicy?', jp: 'ã“ã‚Œã¯è¾›ã„ã§ã™ã‹ï¼Ÿ', kr: 'ì´ê±° ë§¤ì›Œìš”?', th: 'à¹€à¸œà¹‡à¸”à¹„à¸«à¸¡?' },
            { id: 'dine-water', category: 'dining', zh: 'è«‹çµ¦æˆ‘æ°´', en: 'Water, please.', jp: 'ãŠæ°´ã‚’ãã ã•ã„ã€‚', kr: 'ë¬¼ ì¢€ ì£¼ì„¸ìš”.', th: 'à¸‚à¸­à¸™à¹‰à¸³à¹€à¸›à¸¥à¹ˆà¸²à¸«à¸™à¹ˆà¸­à¸¢' },
            { id: 'dine-check', category: 'dining', zh: 'æˆ‘è¦çµå¸³', en: 'Check, please.', jp: 'ãŠä¼šè¨ˆã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚', kr: 'ê³„ì‚°í•´ ì£¼ì„¸ìš”.', th: 'à¹€à¸à¹‡à¸šà¸•à¸±à¸‡à¸„à¹Œà¸”à¹‰à¸§à¸¢ / à¹€à¸Šà¹‡à¸„à¸šà¸´à¸¥' },
            { id: 'dine-delicious', category: 'dining', zh: 'å¾ˆå¥½åƒ', en: 'It was delicious.', jp: 'ç¾å‘³ã—ã‹ã£ãŸã§ã™ã€‚', kr: 'ë§›ìˆì—ˆì–´ìš”.', th: 'à¸­à¸£à¹ˆà¸­à¸¢à¸¡à¸²à¸' },

            // è¨‚ä½
            { id: 'dine-reservation', category: 'dining', zh: 'æˆ‘æœ‰è¨‚ä½', en: 'I have a reservation.', jp: 'äºˆç´„ã—ã¦ã„ã¾ã™ã€‚', kr: 'ì˜ˆì•½í–ˆì–´ìš”.', th: 'à¸‰à¸±à¸™à¸ˆà¸­à¸‡à¹„à¸§à¹‰à¹à¸¥à¹‰à¸§' },
            { id: 'dine-name', category: 'dining', zh: 'è¨‚ä½åå­—æ˜¯...', en: 'Reservation under...', jp: 'äºˆç´„ã®åå‰ã¯...', kr: 'ì˜ˆì•½ ì´ë¦„ì€...', th: 'à¸ˆà¸­à¸‡à¹ƒà¸™à¸™à¸²à¸¡...' },

            // é»é¤
            { id: 'dine-order-this', category: 'dining', zh: 'æˆ‘è¦é»é€™å€‹', en: 'I\'ll have this.', jp: 'ã“ã‚Œã‚’ãã ã•ã„ã€‚', kr: 'ì´ê±° ì£¼ì„¸ìš”.', th: 'à¸‚à¸­à¹€à¸¡à¸™à¸¹à¸™à¸µà¹‰' },
            {
                id: 'dine-without',
                category: 'dining',
                isDynamic: true,
                title: 'ä¸è¦/å°‘...ï¼ˆèª¿å‘³ï¼‰',
                options: [
                    { label: 'ä¸è¾£', zh: 'ä¸è¦è¾£', en: 'No spicy.', jp: 'è¾›ãã—ãªã„ã§ãã ã•ã„ã€‚', kr: 'ë§µì§€ ì•Šê²Œ í•´ì£¼ì„¸ìš”.', th: 'à¹„à¸¡à¹ˆà¹€à¸œà¹‡à¸”' },
                    { label: 'å°‘é¹½', zh: 'å°‘é¹½', en: 'Less salt.', jp: 'å¡©ã‚’å°‘ãªã‚ã§ã€‚', kr: 'ì‹±ê²ê²Œ í•´ì£¼ì„¸ìš”.', th: 'à¹€à¸à¸¥à¸·à¸­à¸™à¹‰à¸­à¸¢' },
                    { label: 'å»å†°', zh: 'å»å†°', en: 'No ice.', jp: 'æ°·ãªã—ã§ã€‚', kr: 'ì–¼ìŒ ë¹¼ì£¼ì„¸ìš”.', th: 'à¹„à¸¡à¹ˆà¹ƒà¸ªà¹ˆà¸™à¹‰à¸³à¹à¸‚à¹‡à¸‡' },
                    { label: 'å°‘ç³–', zh: 'å°‘ç³–/åŠç³–', en: 'Less sugar / Half sugar.', jp: 'ç ‚ç³–ã‚’æ¸›ã‚‰ã—ã¦ã€‚', kr: 'ëœ ë‹¬ê²Œ í•´ì£¼ì„¸ìš”.', th: 'à¸«à¸§à¸²à¸™à¸™à¹‰à¸­à¸¢' }
                ]
            },
            { id: 'dine-one-more', category: 'dining', zh: 'å†ä¾†ä¸€ä»½é€™å€‹', en: 'One more of this, please.', jp: 'ã“ã‚Œã‚’ã‚‚ã†ä¸€ã¤ãã ã•ã„ã€‚', kr: 'ì´ê±° í•˜ë‚˜ ë” ì£¼ì„¸ìš”.', th: 'à¸‚à¸­à¹€à¸¡à¸™à¸¹à¸™à¸µà¹‰à¸­à¸µà¸à¸«à¸™à¸¶à¹ˆà¸‡à¸—à¸µà¹ˆ' },

            // é¤å…·
            {
                id: 'dine-utensils',
                category: 'dining',
                isDynamic: true,
                title: 'è«‹çµ¦æˆ‘...ï¼ˆé¤å…·ï¼‰',
                options: [
                    { label: 'ç­·å­', zh: 'è«‹çµ¦æˆ‘ç­·å­', en: 'Chopsticks, please.', jp: 'ãŠç®¸ã‚’ãã ã•ã„ã€‚', kr: 'ì “ê°€ë½ ì£¼ì„¸ìš”.', th: 'à¸‚à¸­à¸•à¸°à¹€à¸à¸µà¸¢à¸šà¸«à¸™à¹ˆà¸­à¸¢' },
                    { label: 'å‰å­', zh: 'è«‹çµ¦æˆ‘å‰å­', en: 'Fork, please.', jp: 'ãƒ•ã‚©ãƒ¼ã‚¯ã‚’ãã ã•ã„ã€‚', kr: 'í¬í¬ ì£¼ì„¸ìš”.', th: 'à¸‚à¸­à¸ªà¹‰à¸­à¸¡à¸«à¸™à¹ˆà¸­à¸¢' },
                    { label: 'ç´™å·¾', zh: 'è«‹çµ¦æˆ‘ç´™å·¾', en: 'Napkin, please.', jp: 'ãƒŠãƒ—ã‚­ãƒ³ã‚’ãã ã•ã„ã€‚', kr: 'ëƒ…í‚¨ ì£¼ì„¸ìš”.', th: 'à¸‚à¸­à¸à¸£à¸°à¸”à¸²à¸©à¸—à¸´à¸Šà¸Šà¸¹à¸«à¸™à¹ˆà¸­à¸¢' }
                ]
            },

            // å¤–å¸¶
            { id: 'dine-takeaway', category: 'dining', zh: 'å¯ä»¥å¤–å¸¶å—ï¼Ÿ', en: 'Can I take away?', jp: 'æŒã¡å¸°ã‚Šã§ãã¾ã™ã‹ï¼Ÿ', kr: 'í¬ì¥ ê°€ëŠ¥í•œê°€ìš”?', th: 'à¸‹à¸·à¹‰à¸­à¸à¸¥à¸±à¸šà¹„à¸”à¹‰à¹„à¸«à¸¡?' },
            { id: 'dine-pack', category: 'dining', zh: 'è«‹å¹«æˆ‘æ‰“åŒ…', en: 'Please pack this to go.', jp: 'æŒã¡å¸°ã‚Šç”¨ã«åŒ…ã‚“ã§ãã ã•ã„ã€‚', kr: 'í¬ì¥í•´ ì£¼ì„¸ìš”.', th: 'à¸«à¹ˆà¸­à¸à¸¥à¸±à¸šà¹ƒà¸«à¹‰à¸«à¸™à¹ˆà¸­à¸¢' },

            // --- è§€å…‰/æ™¯é» (Sightseeing) ---
            { 
                id: 'sight-nearby',
                category: 'sightseeing', 
                isDynamic: true,
                title: 'è«‹å•é™„è¿‘æœ‰...å—ï¼Ÿ(å°‹æ‰¾åœ°é»)', 
                options: [
                    { label: 'å’–å•¡å»³', zh: 'è«‹å•é™„è¿‘æœ‰å’–å•¡å»³å—ï¼Ÿ', en: 'Is there a cafe nearby?', jp: 'è¿‘ãã«ã‚«ãƒ•ã‚§ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', kr: 'ê·¼ì²˜ì— ì¹´í˜ê°€ ìˆë‚˜ìš”?', th: 'à¸¡à¸µà¸„à¸²à¹€à¸Ÿà¹ˆà¹à¸–à¸§à¸™à¸µà¹‰à¹„à¸«à¸¡?' },
                    { label: 'æ•™æœƒ', zh: 'è«‹å•é™„è¿‘æœ‰åŸºç£æ•™æœƒå—ï¼Ÿ', en: 'Is there a Christian church nearby?', jp: 'è¿‘ãã«æ•™ä¼šã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', kr: 'ê·¼ì²˜ì— êµíšŒê°€ ìˆë‚˜ìš”?', th: 'à¸¡à¸µà¹‚à¸šà¸ªà¸–à¹Œà¸„à¸£à¸´à¸ªà¸•à¹Œà¹à¸–à¸§à¸™à¸µà¹‰à¹„à¸«à¸¡?' },
                    { label: 'ä½›å¯º', zh: 'è«‹å•é™„è¿‘æœ‰ä½›å¯ºå—ï¼Ÿ', en: 'Is there a Buddhist temple nearby?', jp: 'è¿‘ãã«ãŠå¯ºã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', kr: 'ê·¼ì²˜ì— ì ˆì´ ìˆë‚˜ìš”?', th: 'à¸¡à¸µà¸§à¸±à¸”à¹à¸–à¸§à¸™à¸µà¹‰à¹„à¸«à¸¡?' },
                    { label: 'ç¥ç¤¾', zh: 'è«‹å•é™„è¿‘æœ‰ç¥ç¤¾å—ï¼Ÿ', en: 'Is there a shrine nearby?', jp: 'è¿‘ãã«ç¥ç¤¾ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', kr: 'ê·¼ì²˜ì— ì‹ ì‚¬ê°€ ìˆë‚˜ìš”?', th: 'à¸¡à¸µà¸¨à¸²à¸¥à¹€à¸ˆà¹‰à¸²à¹à¸–à¸§à¸™à¸µà¹‰à¹„à¸«à¸¡?' },
                    { label: 'éŠå®¢ä¸­å¿ƒ', zh: 'è«‹å•éŠå®¢ä¸­å¿ƒåœ¨å“ªè£¡ï¼Ÿ', en: 'Where is the tourist info center?', jp: 'è¦³å…‰æ¡ˆå†…æ‰€ã¯ã©ã“ã§ã™ã‹ï¼Ÿ', kr: 'ê´€ê´‘ ì•ˆë‚´ì†ŒëŠ” ì–´ë””ì˜ˆìš”?', th: 'à¸¨à¸¹à¸™à¸¢à¹Œà¸šà¸£à¸´à¸à¸²à¸£à¸™à¸±à¸à¸—à¹ˆà¸­à¸‡à¹€à¸—à¸µà¹ˆà¸¢à¸§à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆà¹„à¸«à¸™?' }
                ]
            },
            { id: 'sight-ticket', category: 'sightseeing', zh: 'åœ¨å“ªè£¡è²·ç¥¨ï¼Ÿ', en: 'Where can I buy tickets?', jp: 'ãƒã‚±ãƒƒãƒˆã¯ã©ã“ã§è²·ãˆã¾ã™ã‹ï¼Ÿ', kr: 'í‘œëŠ” ì–´ë””ì„œ ì‚¬ìš”?', th: 'à¸‹à¸·à¹‰à¸­à¸•à¸±à¹‹à¸§à¸—à¸µà¹ˆà¹„à¸«à¸™?' },
            { id: 'sight-hours', category: 'sightseeing', zh: 'å¹¾é»é–‹é–€/é—œé–€ï¼Ÿ', en: 'What are the opening hours?', jp: 'å–¶æ¥­æ™‚é–“ã¯ä½•æ™‚ã§ã™ã‹ï¼Ÿ', kr: 'ì˜ì—…ì‹œê°„ì´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?', th: 'à¹€à¸›à¸´à¸”/à¸›à¸´à¸”à¸à¸µà¹ˆà¹‚à¸¡à¸‡?' },
            { id: 'sight-photo', category: 'sightseeing', zh: 'é€™è£¡å¯ä»¥æ‹ç…§å—ï¼Ÿ', en: 'Is photography allowed here?', jp: 'ã“ã“ã§å†™çœŸã‚’æ’®ã£ã¦ã‚‚ã„ã„ã§ã™ã‹ï¼Ÿ', kr: 'ì—¬ê¸°ì„œ ì‚¬ì§„ ì°ì–´ë„ ë˜ë‚˜ìš”?', th: 'à¸–à¹ˆà¸²à¸¢à¸£à¸¹à¸›à¸—à¸µà¹ˆà¸™à¸µà¹ˆà¹„à¸”à¹‰à¹„à¸«à¸¡?' },
            { id: 'sight-where', category: 'sightseeing', zh: 'é€™å€‹åœ°æ–¹åœ¨å“ªè£¡ï¼Ÿ', en: 'Where is this place?', jp: 'ã“ã“ã¯ã©ã“ã§ã™ã‹ï¼Ÿ', kr: 'ì—¬ê¸°ëŠ” ì–´ë””ì¸ê°€ìš”?', th: 'à¸—à¸µà¹ˆà¸™à¸µà¹ˆà¸—à¸µà¹ˆà¹„à¸«à¸™?' },
            { id: 'sight-take-photo', category: 'sightseeing', zh: 'å¯ä»¥å¹«æˆ‘æ‹ç…§å—ï¼Ÿ', en: 'Could you take a picture of me?', jp: 'å†™çœŸã‚’æ’®ã£ã¦ã‚‚ã‚‰ãˆã¾ã™ã‹ï¼Ÿ', kr: 'ì‚¬ì§„ ì¢€ ì°ì–´ì£¼ì‹œê² ì–´ìš”?', th: 'à¸Šà¹ˆà¸§à¸¢à¸–à¹ˆà¸²à¸¢à¸£à¸¹à¸›à¹ƒà¸«à¹‰à¸«à¸™à¹ˆà¸­à¸¢à¹„à¸”à¹‰à¹„à¸«à¸¡?' },

            // --- è³¼ç‰© (Shopping) ---
            { id: 'shop-secondhand', category: 'shopping', zh: 'è«‹å•é™„è¿‘æœ‰äºŒæ‰‹åº—å—ï¼Ÿ', en: 'Is there a second-hand shop nearby?', jp: 'è¿‘ãã«ãƒªã‚µã‚¤ã‚¯ãƒ«ã‚·ãƒ§ãƒƒãƒ—ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', kr: 'ê·¼ì²˜ì— ì¤‘ê³  ê°€ê²Œê°€ ìˆë‚˜ìš”?', th: 'à¸¡à¸µà¸£à¹‰à¸²à¸™à¸¡à¸·à¸­à¸ªà¸­à¸‡à¹à¸–à¸§à¸™à¸µà¹‰à¹„à¸«à¸¡?' },
            { id: 'shop-discount', category: 'shopping', zh: 'ç®—ä¾¿å®œä¸€é»å¥½å—ï¼Ÿ', en: 'Can you give me a discount?', jp: 'ã¾ã‘ã¦ã‚‚ã‚‰ãˆã¾ã›ã‚“ã‹ï¼Ÿ', kr: 'ì¢€ ê¹ì•„ì£¼ì„¸ìš”.', th: 'à¸¥à¸”à¸£à¸²à¸„à¸²à¸«à¸™à¹ˆà¸­à¸¢à¹„à¸”à¹‰à¹„à¸«à¸¡?' },
            { id: 'shop-expensive', category: 'shopping', zh: 'å¤ªè²´äº†', en: 'It is too expensive.', jp: 'é«˜ã™ãã¾ã™ã€‚', kr: 'ë„ˆë¬´ ë¹„ì‹¸ìš”.', th: 'à¹à¸à¸‡à¹€à¸à¸´à¸™à¹„à¸›' },
            { id: 'shop-has-discount', category: 'shopping', zh: 'æœ‰æŠ˜æ‰£å—ï¼Ÿ', en: 'Is there a discount?', jp: 'å‰²å¼•ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', kr: 'í• ì¸ì´ ìˆë‚˜ìš”?', th: 'à¸¡à¸µà¸ªà¹ˆà¸§à¸™à¸¥à¸”à¹„à¸«à¸¡?' },
            { id: 'shop-taxfree', category: 'shopping', zh: 'å¯ä»¥é€€ç¨…å—ï¼Ÿ', en: 'Is this tax-free?', jp: 'å…ç¨ã«ã§ãã¾ã™ã‹ï¼Ÿ', kr: 'ë©´ì„¸ê°€ ë˜ë‚˜ìš”?', th: 'à¸‚à¸­à¸„à¸·à¸™à¸ à¸²à¸©à¸µà¹„à¸”à¹‰à¹„à¸«à¸¡?' },
            { id: 'shop-cash', category: 'shopping', zh: 'åªèƒ½ä»˜ç¾é‡‘', en: 'Cash only, please.', jp: 'ç¾é‡‘ã®ã¿ã§ã™ã€‚', kr: 'í˜„ê¸ˆë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.', th: 'à¸£à¸±à¸šà¹€à¸‰à¸à¸²à¸°à¹€à¸‡à¸´à¸™à¸ªà¸”' },
            { id: 'shop-card', category: 'shopping', zh: 'å¯ä»¥ç”¨ä¿¡ç”¨å¡å—ï¼Ÿ', en: 'Credit card accepted?', jp: 'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã¯ä½¿ãˆã¾ã™ã‹ï¼Ÿ', kr: 'ì¹´ë“œ ê²°ì œ ë˜ë‚˜ìš”?', th: 'à¸£à¸±à¸šà¸šà¸±à¸•à¸£à¹€à¸„à¸£à¸”à¸´à¸•à¹„à¸«à¸¡?' },
            { id: 'shop-price', category: 'shopping', zh: 'å¤šå°‘éŒ¢ï¼Ÿ', en: 'How much is this?', jp: 'ã„ãã‚‰ã§ã™ã‹ï¼Ÿ', kr: 'ì–¼ë§ˆì˜ˆìš”?', th: 'à¸£à¸²à¸„à¸²à¹€à¸—à¹ˆà¸²à¹„à¸«à¸£à¹ˆ?' },
            { id: 'shop-popular', category: 'shopping', zh: 'é€™å¾ˆå—æ­¡è¿ (æ¨è–¦)', en: 'This is very popular.', jp: 'ã“ã‚Œã¯ã¨ã¦ã‚‚äººæ°—ãŒã‚ã‚Šã¾ã™ã€‚', kr: 'ì´ê±° ì•„ì£¼ ì¸ê¸° ìˆì–´ìš”.', th: 'à¸­à¸±à¸™à¸™à¸µà¹‰à¸‚à¸²à¸¢à¸”à¸µà¸¡à¸²à¸' },

            // --- ç·Šæ€¥/é†«ç™‚ (Emergency) ---
            { id: 'emg-help', category: 'emergency', zh: 'æ•‘å‘½ï¼', en: 'Help!', jp: 'åŠ©ã‘ã¦ï¼', kr: 'ë„ì™€ì£¼ì„¸ìš”!', th: 'à¸Šà¹ˆà¸§à¸¢à¸”à¹‰à¸§à¸¢!' },
            { id: 'emg-sick', category: 'emergency', zh: 'æˆ‘ä¸èˆ’æœ', en: 'I feel sick.', jp: 'å…·åˆãŒæ‚ªã„ã§ã™ã€‚', kr: 'ëª¸ì´ ì•ˆ ì¢‹ì•„ìš”.', th: 'à¸‰à¸±à¸™à¸£à¸¹à¹‰à¸ªà¸¶à¸à¹„à¸¡à¹ˆà¸ªà¸šà¸²à¸¢' },
            { 
                id: 'emg-lost-item',
                category: 'emergency', 
                isDynamic: true,
                title: 'æˆ‘éºå¤±äº†... (ç‰©å“)', 
                options: [
                    { label: 'è­·ç…§', zh: 'æˆ‘éºå¤±äº†è­·ç…§', en: 'I lost my passport.', jp: 'ãƒ‘ã‚¹ãƒãƒ¼ãƒˆã‚’ãªãã—ã¾ã—ãŸã€‚', kr: 'ì—¬ê¶Œì„ ìƒì–´ë²„ë ¸ì–´ìš”.', th: 'à¸‰à¸±à¸™à¸—à¸³à¸à¸²à¸ªà¸›à¸­à¸£à¹Œà¸•à¸«à¸²à¸¢' },
                    { label: 'éŒ¢åŒ…', zh: 'æˆ‘éºå¤±äº†éŒ¢åŒ…', en: 'I lost my wallet.', jp: 'è²¡å¸ƒã‚’ãªãã—ã¾ã—ãŸã€‚', kr: 'ì§€ê°‘ì„ ìƒì–´ë²„ë ¸ì–´ìš”.', th: 'à¸‰à¸±à¸™à¸—à¸³à¸à¸£à¸°à¹€à¸›à¹‹à¸²à¸•à¸±à¸‡à¸„à¹Œà¸«à¸²à¸¢' },
                    { label: 'æ‰‹æ©Ÿ', zh: 'æˆ‘éºå¤±äº†æ‰‹æ©Ÿ', en: 'I lost my phone.', jp: 'æºå¸¯ã‚’ãªãã—ã¾ã—ãŸã€‚', kr: 'í•¸ë“œí°ì„ ìƒì–´ë²„ë ¸ì–´ìš”.', th: 'à¸‰à¸±à¸™à¸—à¸³à¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œà¸«à¸²à¸¢' }
                ]
            },
            { id: 'emg-ambulance', category: 'emergency', zh: 'è«‹å«æ•‘è­·è»Š', en: 'Call an ambulance!', jp: 'æ•‘æ€¥è»Šã‚’å‘¼ã‚“ã§ãã ã•ã„ï¼', kr: 'êµ¬ê¸‰ì°¨ ë¶ˆëŸ¬ì£¼ì„¸ìš”!', th: 'à¹€à¸£à¸µà¸¢à¸à¸£à¸–à¸à¸¢à¸²à¸šà¸²à¸¥à¹ƒà¸«à¹‰à¸«à¸™à¹ˆà¸­à¸¢!' },
            { id: 'emg-police', category: 'emergency', zh: 'è­¦å¯Ÿå±€åœ¨å“ªè£¡ï¼Ÿ', en: 'Where is the police station?', jp: 'è­¦å¯Ÿç½²ã¯ã©ã“ã§ã™ã‹ï¼Ÿ', kr: 'ê²½ì°°ì„œëŠ” ì–´ë””ì˜ˆìš”?', th: 'à¸ªà¸–à¸²à¸™à¸µà¸•à¸³à¸£à¸§à¸ˆà¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆà¹„à¸«à¸™?' },
            { id: 'emg-hospital', category: 'emergency', zh: 'é†«é™¢åœ¨å“ªè£¡ï¼Ÿ', en: 'Where is the hospital?', jp: 'ç—…é™¢ã¯ã©ã“ã§ã™ã‹ï¼Ÿ', kr: 'ë³‘ì›ì€ ì–´ë””ì˜ˆìš”?', th: 'à¹‚à¸£à¸‡à¸à¸¢à¸²à¸šà¸²à¸¥à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆà¹„à¸«à¸™?' },

            // --- åŸºç¤ (Basic) ---
            { 
                id: 'basic-nationality',
                category: 'basic', 
                isDynamic: true,
                title: 'ä½ æ˜¯...äººå—ï¼Ÿ(åœ‹ç±)', 
                options: [
                    { label: 'ç¾åœ‹', zh: 'ä½ æ˜¯ç¾åœ‹äººå—ï¼Ÿ', en: 'Are you from the US?', jp: 'ã‚¢ãƒ¡ãƒªã‚«ã®æ–¹ã§ã™ã‹ï¼Ÿ', kr: 'ë¯¸êµ­ ë¶„ì´ì‹ ê°€ìš”?', th: 'à¸„à¸¸à¸“à¸¡à¸²à¸ˆà¸²à¸à¸­à¹€à¸¡à¸£à¸´à¸à¸²à¹ƒà¸Šà¹ˆà¹„à¸«à¸¡?' },
                    { label: 'æ—¥æœ¬', zh: 'ä½ æ˜¯æ—¥æœ¬äººå—ï¼Ÿ', en: 'Are you Japanese?', jp: 'æ—¥æœ¬äººã§ã™ã‹ï¼Ÿ', kr: 'ì¼ë³¸ ë¶„ì´ì‹ ê°€ìš”?', th: 'à¸„à¸¸à¸“à¹€à¸›à¹‡à¸™à¸„à¸™à¸à¸µà¹ˆà¸›à¸¸à¹ˆà¸™à¹ƒà¸Šà¹ˆà¹„à¸«à¸¡?' },
                    { label: 'éŸ“åœ‹', zh: 'ä½ æ˜¯éŸ“åœ‹äººå—ï¼Ÿ', en: 'Are you Korean?', jp: 'éŸ“å›½ã®æ–¹ã§ã™ã‹ï¼Ÿ', kr: 'í•œêµ­ ë¶„ì´ì‹ ê°€ìš”?', th: 'à¸„à¸¸à¸“à¹€à¸›à¹‡à¸™à¸„à¸™à¹€à¸à¸²à¸«à¸¥à¸µà¹ƒà¸Šà¹ˆà¹„à¸«à¸¡?' },
                    { label: 'å°ç£', zh: 'ä½ æ˜¯å°ç£äººå—ï¼Ÿ', en: 'Are you Taiwanese?', jp: 'å°æ¹¾ã®æ–¹ã§ã™ã‹ï¼Ÿ', kr: 'ëŒ€ë§Œ ë¶„ì´ì‹ ê°€ìš”?', th: 'à¸„à¸¸à¸“à¹€à¸›à¹‡à¸™à¸„à¸™à¹„à¸•à¹‰à¸«à¸§à¸±à¸™à¹ƒà¸Šà¹ˆà¹„à¸«à¸¡?' },
                    { label: 'é¦™æ¸¯', zh: 'ä½ æ˜¯é¦™æ¸¯äººå—ï¼Ÿ', en: 'Are you from Hong Kong?', jp: 'é¦™æ¸¯ã®æ–¹ã§ã™ã‹ï¼Ÿ', kr: 'í™ì½© ë¶„ì´ì‹ ê°€ìš”?', th: 'à¸„à¸¸à¸“à¸¡à¸²à¸ˆà¸²à¸à¸®à¹ˆà¸­à¸‡à¸à¸‡à¹ƒà¸Šà¹ˆà¹„à¸«à¸¡?' },
                    { label: 'æ³°åœ‹', zh: 'ä½ æ˜¯æ³°åœ‹äººå—ï¼Ÿ', en: 'Are you Thai?', jp: 'ã‚¿ã‚¤ã®æ–¹ã§ã™ã‹ï¼Ÿ', kr: 'íƒœêµ­ ë¶„ì´ì‹ ê°€ìš”?', th: 'à¸„à¸¸à¸“à¹€à¸›à¹‡à¸™à¸„à¸™à¹„à¸—à¸¢à¹ƒà¸Šà¹ˆà¹„à¸«à¸¡?' }
                ]
            },
            { 
                id: 'basic-greeting',
                category: 'basic', 
                isDynamic: true,
                title: 'æ—©å®‰ / åˆå®‰ / æ™šå®‰', 
                options: [
                    { label: 'æ—©å®‰', zh: 'æ—©å®‰', en: 'Good morning.', jp: 'ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™ã€‚', kr: 'ì¢‹ì€ ì•„ì¹¨ì…ë‹ˆë‹¤.', th: 'à¸ªà¸§à¸±à¸ªà¸”à¸µà¸•à¸­à¸™à¹€à¸Šà¹‰à¸²' },
                    { label: 'åˆå®‰', zh: 'ä½ å¥½ / åˆå®‰', en: 'Hello / Good afternoon.', jp: 'ã“ã‚“ã«ã¡ã¯ã€‚', kr: 'ì•ˆë…•í•˜ì„¸ìš”.', th: 'à¸ªà¸§à¸±à¸ªà¸”à¸µ' },
                    { label: 'æ™šå®‰', zh: 'æ™šå®‰', en: 'Good evening.', jp: 'ã“ã‚“ã°ã‚“ã¯ã€‚', kr: 'ì¢‹ì€ ì €ë…ì…ë‹ˆë‹¤.', th: 'à¸ªà¸§à¸±à¸ªà¸”à¸µà¸•à¸­à¸™à¹€à¸¢à¹‡à¸™' }
                ]
            },
            { id: 'basic-wait', category: 'basic', zh: 'è«‹ç¨ç­‰ä¸€ä¸‹', en: 'Please wait a moment.', jp: 'å°‘ã€…ãŠå¾…ã¡ãã ã•ã„ã€‚', kr: 'ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.', th: 'à¸à¸£à¸¸à¸“à¸²à¸£à¸­à¸ªà¸±à¸à¸„à¸£à¸¹à¹ˆ' },
            { id: 'basic-thank-you', category: 'basic', zh: 'è¬è¬', en: 'Thank you.', jp: 'ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚', kr: 'ê°ì‚¬í•©ë‹ˆë‹¤.', th: 'à¸‚à¸­à¸šà¸„à¸¸à¸“' },
            { id: 'basic-excuse-me', category: 'basic', zh: 'ä¸å¥½æ„æ€', en: 'Excuse me.', jp: 'ã™ã¿ã¾ã›ã‚“ã€‚', kr: 'ì‹¤ë¡€í•©ë‹ˆë‹¤.', th: 'à¸‚à¸­à¹‚à¸—à¸©à¸™à¸° / à¸‚à¸­à¸—à¸²à¸‡à¸«à¸™à¹ˆà¸­à¸¢' },

            // --- äº¤é€š (Transport) ---
            { id: 'trans-hotel', category: 'transport', zh: 'é€™å®¶é£¯åº—æ€éº¼å»ï¼Ÿ', en: 'How do I get to this hotel?', jp: 'ã“ã®ãƒ›ãƒ†ãƒ«ã¸ã¯ã©ã†è¡Œãã¾ã™ã‹ï¼Ÿ', kr: 'ì´ í˜¸í…”ì€ ì–´ë–»ê²Œ ê°€ë‚˜ìš”?', th: 'à¹‚à¸£à¸‡à¹à¸£à¸¡à¸™à¸µà¹‰à¹„à¸›à¸—à¸²à¸‡à¹„à¸«à¸™?' },
            { id: 'trans-subway', category: 'transport', zh: 'åœ°éµç«™åœ¨å“ªè£¡ï¼Ÿ', en: 'Where is the subway station?', jp: 'åœ°ä¸‹é‰„ã®é§…ã¯ã©ã“ã§ã™ã‹ï¼Ÿ', kr: 'ì§€í•˜ì² ì—­ì€ ì–´ë””ì˜ˆìš”?', th: 'à¸ªà¸–à¸²à¸™à¸µà¸£à¸–à¹„à¸Ÿà¹ƒà¸•à¹‰à¸”à¸´à¸™à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆà¹„à¸«à¸™?' },
            { id: 'trans-take-me', category: 'transport', zh: 'è«‹è¼‰æˆ‘å»é€™è£¡', en: 'Take me here, please.', jp: 'ã“ã“ã¸è¡Œã£ã¦ãã ã•ã„ã€‚', kr: 'ì—¬ê¸°ë¡œ ê°€ì£¼ì„¸ìš”.', th: 'à¸Šà¹ˆà¸§à¸¢à¹„à¸›à¸ªà¹ˆà¸‡à¸—à¸µà¹ˆà¸™à¸µà¹ˆà¸«à¸™à¹ˆà¸­à¸¢' },

            // å¤§çœ¾é‹è¼¸
            { id: 'trans-airport-bus', category: 'transport', zh: 'æ©Ÿå ´å·´å£«åœ¨å“ªè£¡ï¼Ÿ', en: 'Where is the airport bus?', jp: 'ç©ºæ¸¯ãƒã‚¹ã¯ã©ã“ã§ã™ã‹ï¼Ÿ', kr: 'ê³µí•­ë²„ìŠ¤ëŠ” ì–´ë””ì˜ˆìš”?', th: 'à¸£à¸–à¸šà¸±à¸ªà¸ªà¸™à¸²à¸¡à¸šà¸´à¸™à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆà¹„à¸«à¸™?' },
            { id: 'trans-buy-ticket', category: 'transport', zh: 'æˆ‘è¦è²·ç¥¨', en: 'I want to buy a ticket.', jp: 'ãƒã‚±ãƒƒãƒˆã‚’è²·ã„ãŸã„ã§ã™ã€‚', kr: 'í‘œë¥¼ ì‚¬ê³  ì‹¶ì–´ìš”.', th: 'à¸‰à¸±à¸™à¸­à¸¢à¸²à¸à¸‹à¸·à¹‰à¸­à¸•à¸±à¹‹à¸§' },
            {
                id: 'trans-which-line',
                category: 'transport',
                isDynamic: true,
                title: 'è¦æ­å¹¾è™Ÿç·šï¼Ÿ(è·¯ç·š)',
                options: [
                    { label: 'åˆ°æ©Ÿå ´', zh: 'åˆ°æ©Ÿå ´è¦æ­å¹¾è™Ÿç·šï¼Ÿ', en: 'Which line goes to the airport?', jp: 'ç©ºæ¸¯ã¸ã¯ä½•ç•ªç·šã§ã™ã‹ï¼Ÿ', kr: 'ê³µí•­ ê°€ë ¤ë©´ ëª‡ í˜¸ì„ ì´ì—ìš”?', th: 'à¹„à¸›à¸ªà¸™à¸²à¸¡à¸šà¸´à¸™à¸•à¹‰à¸­à¸‡à¸‚à¸¶à¹‰à¸™à¸ªà¸²à¸¢à¹„à¸«à¸™?' },
                    { label: 'åˆ°è»Šç«™', zh: 'åˆ°ç«è»Šç«™è¦æ­å¹¾è™Ÿç·šï¼Ÿ', en: 'Which line goes to the train station?', jp: 'é§…ã¸ã¯ä½•ç•ªç·šã§ã™ã‹ï¼Ÿ', kr: 'ê¸°ì°¨ì—­ ê°€ë ¤ë©´ ëª‡ í˜¸ì„ ì´ì—ìš”?', th: 'à¹„à¸›à¸ªà¸–à¸²à¸™à¸µà¸£à¸–à¹„à¸Ÿà¸•à¹‰à¸­à¸‡à¸‚à¸¶à¹‰à¸™à¸ªà¸²à¸¢à¹„à¸«à¸™?' }
                ]
            },
            { id: 'trans-where-get-off', category: 'transport', zh: 'åœ¨å“ªè£¡ä¸‹è»Šï¼Ÿ', en: 'Where should I get off?', jp: 'ã©ã“ã§é™ã‚Šã‚Œã°ã„ã„ã§ã™ã‹ï¼Ÿ', kr: 'ì–´ë””ì„œ ë‚´ë ¤ì•¼ í•˜ë‚˜ìš”?', th: 'à¸•à¹‰à¸­à¸‡à¸¥à¸‡à¸—à¸µà¹ˆà¹„à¸«à¸™?' },
            { id: 'trans-how-long', category: 'transport', zh: 'è¦å¤šä¹…ï¼Ÿ', en: 'How long does it take?', jp: 'ã©ã®ãã‚‰ã„ã‹ã‹ã‚Šã¾ã™ã‹ï¼Ÿ', kr: 'ì–¼ë§ˆë‚˜ ê±¸ë ¤ìš”?', th: 'à¹ƒà¸Šà¹‰à¹€à¸§à¸¥à¸²à¸™à¸²à¸™à¹€à¸—à¹ˆà¸²à¹„à¸«à¸£à¹ˆ?' },

            // è¨ˆç¨‹è»Šç›¸é—œ
            { id: 'trans-taxi-receipt', category: 'transport', zh: 'è«‹çµ¦æˆ‘æ”¶æ“š', en: 'Receipt, please.', jp: 'é ˜åæ›¸ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚', kr: 'ì˜ìˆ˜ì¦ ì£¼ì„¸ìš”.', th: 'à¸‚à¸­à¹ƒà¸šà¹€à¸ªà¸£à¹‡à¸ˆà¸«à¸™à¹ˆà¸­à¸¢' },
            { id: 'trans-stop-here', category: 'transport', zh: 'è«‹åœ¨é€™è£¡åœ', en: 'Please stop here.', jp: 'ã“ã“ã§æ­¢ã‚ã¦ãã ã•ã„ã€‚', kr: 'ì—¬ê¸°ì„œ ì„¸ì›Œì£¼ì„¸ìš”.', th: 'à¸ˆà¸­à¸”à¸•à¸£à¸‡à¸™à¸µà¹‰' },
            { id: 'trans-how-much-fare', category: 'transport', zh: 'åˆ°é‚£è£¡è¦å¤šå°‘éŒ¢ï¼Ÿ', en: 'How much to get there?', jp: 'ãã“ã¾ã§ã„ãã‚‰ã§ã™ã‹ï¼Ÿ', kr: 'ê±°ê¸°ê¹Œì§€ ì–¼ë§ˆì˜ˆìš”?', th: 'à¹„à¸›à¸—à¸µà¹ˆà¸™à¸±à¹ˆà¸™à¹€à¸—à¹ˆà¸²à¹„à¸«à¸£à¹ˆ?' },
            { id: 'trans-mobile-pay', category: 'transport', zh: 'å¯ä»¥ç”¨æ‰‹æ©Ÿä»˜æ¬¾å—ï¼Ÿ', en: 'Can I pay by phone?', jp: 'ã‚¹ãƒãƒ›æ±ºæ¸ˆã§ãã¾ã™ã‹ï¼Ÿ', kr: 'íœ´ëŒ€í°ìœ¼ë¡œ ê²°ì œí•  ìˆ˜ ìˆë‚˜ìš”?', th: 'à¸ˆà¹ˆà¸²à¸¢à¸œà¹ˆà¸²à¸™à¸¡à¸·à¸­à¸–à¸·à¸­à¹„à¸”à¹‰à¹„à¸«à¸¡?' },

            // --- ä½å®¿/è¨­æ–½ (Hotel) ---
            { id: 'hotel-wifi', category: 'hotel', zh: 'æœ‰å…è²»Wi-Fiå—ï¼Ÿ', en: 'Is there free Wi-Fi?', jp: 'ç„¡æ–™Wi-Fiã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ', kr: 'ë¬´ë£Œ ì™€ì´íŒŒì´ ìˆë‚˜ìš”?', th: 'à¸¡à¸µà¹„à¸§à¹„à¸Ÿà¸Ÿà¸£à¸µà¹„à¸«à¸¡?' },
            { id: 'hotel-toilet', category: 'hotel', zh: 'æ´—æ‰‹é–“åœ¨å“ªè£¡ï¼Ÿ', en: 'Where is the restroom?', jp: 'ãƒˆã‚¤ãƒ¬ã¯ã©ã“ã§ã™ã‹ï¼Ÿ', kr: 'í™”ì¥ì‹¤ì€ ì–´ë””ì˜ˆìš”?', th: 'à¸«à¹‰à¸­à¸‡à¸™à¹‰à¸³à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆà¹„à¸«à¸™?' },
            { id: 'hotel-taxi', category: 'hotel', zh: 'è«‹å¹«æˆ‘å«è¨ˆç¨‹è»Š', en: 'Call a taxi, please.', jp: 'ã‚¿ã‚¯ã‚·ãƒ¼ã‚’å‘¼ã‚“ã§ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ', kr: 'íƒì‹œ ì¢€ ë¶ˆëŸ¬ì£¼ì„¸ìš”.', th: 'à¸Šà¹ˆà¸§à¸¢à¹€à¸£à¸µà¸¢à¸à¹à¸—à¹‡à¸à¸‹à¸µà¹ˆà¹ƒà¸«à¹‰à¸«à¸™à¹ˆà¸­à¸¢' },

            // å…¥ä½é€€æˆ¿
            { id: 'hotel-check-in', category: 'hotel', zh: 'æˆ‘è¦è¾¦ç†å…¥ä½', en: 'I\'d like to check in.', jp: 'ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚', kr: 'ì²´í¬ì¸í•˜ê³  ì‹¶ì–´ìš”.', th: 'à¸‰à¸±à¸™à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹€à¸Šà¹‡à¸„à¸­à¸´à¸™' },
            { id: 'hotel-check-out', category: 'hotel', zh: 'æˆ‘è¦è¾¦ç†é€€æˆ¿', en: 'I\'d like to check out.', jp: 'ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚', kr: 'ì²´í¬ì•„ì›ƒí•˜ê³  ì‹¶ì–´ìš”.', th: 'à¸‰à¸±à¸™à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹€à¸Šà¹‡à¸„à¹€à¸­à¸²à¸—à¹Œ' },
            { id: 'hotel-luggage', category: 'hotel', zh: 'å¯ä»¥å¯„æ”¾è¡Œæå—ï¼Ÿ', en: 'Can I leave my luggage?', jp: 'è·ç‰©ã‚’é ã‹ã£ã¦ã‚‚ã‚‰ãˆã¾ã™ã‹ï¼Ÿ', kr: 'ì§ì„ ë§¡ê¸¸ ìˆ˜ ìˆë‚˜ìš”?', th: 'à¸à¸²à¸à¸à¸£à¸°à¹€à¸›à¹‹à¸²à¹„à¸”à¹‰à¹„à¸«à¸¡?' },

            // æˆ¿é–“å•é¡Œ
            {
                id: 'hotel-room-problem',
                category: 'hotel',
                isDynamic: true,
                title: 'æˆ¿é–“...å£äº† (è¨­å‚™å•é¡Œ)',
                options: [
                    { label: 'å†·æ°£', zh: 'å†·æ°£å£äº†', en: 'The air conditioning is broken.', jp: 'ã‚¨ã‚¢ã‚³ãƒ³ãŒå£Šã‚Œã¦ã„ã¾ã™ã€‚', kr: 'ì—ì–´ì»¨ì´ ê³ ì¥ë‚¬ì–´ìš”.', th: 'à¹à¸­à¸£à¹Œà¹€à¸ªà¸µà¸¢' },
                    { label: 'ç†±æ°´', zh: 'æ²’æœ‰ç†±æ°´', en: 'There\'s no hot water.', jp: 'ãŠæ¹¯ãŒå‡ºã¾ã›ã‚“ã€‚', kr: 'ì˜¨ìˆ˜ê°€ ì•ˆ ë‚˜ì™€ìš”.', th: 'à¹„à¸¡à¹ˆà¸¡à¸µà¸™à¹‰à¸³à¸£à¹‰à¸­à¸™' },
                    { label: 'WiFi', zh: 'WiFié€£ä¸ä¸Š', en: 'WiFi doesn\'t work.', jp: 'WiFiãŒç¹‹ãŒã‚Šã¾ã›ã‚“ã€‚', kr: 'ì™€ì´íŒŒì´ê°€ ì•ˆ ë¼ìš”.', th: 'WiFi à¹ƒà¸Šà¹‰à¹„à¸¡à¹ˆà¹„à¸”à¹‰' }
                ]
            },
            { id: 'hotel-change-room', category: 'hotel', zh: 'å¯ä»¥æ›æˆ¿é–“å—ï¼Ÿ', en: 'Can I change rooms?', jp: 'éƒ¨å±‹ã‚’å¤‰ãˆã¦ã‚‚ã‚‰ãˆã¾ã™ã‹ï¼Ÿ', kr: 'ë°©ì„ ë°”ê¿€ ìˆ˜ ìˆë‚˜ìš”?', th: 'à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸«à¹‰à¸­à¸‡à¹„à¸”à¹‰à¹„à¸«à¸¡?' },

            // é£¯åº—æœå‹™
            { id: 'hotel-breakfast', category: 'hotel', zh: 'æ—©é¤å¹¾é»é–‹å§‹ï¼Ÿ', en: 'What time is breakfast?', jp: 'æœé£Ÿã¯ä½•æ™‚ã‹ã‚‰ã§ã™ã‹ï¼Ÿ', kr: 'ì¡°ì‹ì€ ëª‡ ì‹œë¶€í„°ì˜ˆìš”?', th: 'à¸­à¸²à¸«à¸²à¸£à¹€à¸Šà¹‰à¸²à¹€à¸£à¸´à¹ˆà¸¡à¸à¸µà¹ˆà¹‚à¸¡à¸‡?' },
            { id: 'hotel-towel', category: 'hotel', zh: 'å¯ä»¥çµ¦æˆ‘æ¯›å·¾å—ï¼Ÿ', en: 'Can I have more towels?', jp: 'ã‚¿ã‚ªãƒ«ã‚’ã‚‚ã‚‰ãˆã¾ã™ã‹ï¼Ÿ', kr: 'ìˆ˜ê±´ ì¢€ ì£¼ì„¸ìš”.', th: 'à¸‚à¸­à¸œà¹‰à¸²à¹€à¸Šà¹‡à¸”à¸•à¸±à¸§à¸«à¸™à¹ˆà¸­à¸¢' },

            // --- æ•¸å­—/æ™‚é–“ (Numbers) ---
            {
                id: 'num-count',
                category: 'numbers',
                isDynamic: true,
                title: 'æ•¸å­— 1-10',
                options: [
                    { label: '1-5', zh: 'ä¸€ã€äºŒã€ä¸‰ã€å››ã€äº”', en: 'One, Two, Three, Four, Five', jp: 'ä¸€ã€äºŒã€ä¸‰ã€å››ã€äº”', kr: 'í•˜ë‚˜, ë‘˜, ì…‹, ë„·, ë‹¤ì„¯', th: 'à¸«à¸™à¸¶à¹ˆà¸‡, à¸ªà¸­à¸‡, à¸ªà¸²à¸¡, à¸ªà¸µà¹ˆ, à¸«à¹‰à¸²' },
                    { label: '6-10', zh: 'å…­ã€ä¸ƒã€å…«ã€ä¹ã€å', en: 'Six, Seven, Eight, Nine, Ten', jp: 'å…­ã€ä¸ƒã€å…«ã€ä¹ã€å', kr: 'ì—¬ì„¯, ì¼ê³±, ì—¬ëŸ, ì•„í™‰, ì—´', th: 'à¸«à¸, à¹€à¸ˆà¹‡à¸”, à¹à¸›à¸”, à¹€à¸à¹‰à¸², à¸ªà¸´à¸š' }
                ]
            },
            {
                id: 'num-large',
                category: 'numbers',
                isDynamic: true,
                title: 'å¤§æ•¸å­—',
                options: [
                    { label: 'æ•´å', zh: 'äºŒå / äº”å / ä¸€ç™¾', en: 'Twenty / Fifty / One hundred', jp: 'äºŒå / äº”å / ç™¾', kr: 'ì´ì‹­ / ì˜¤ì‹­ / ë°±', th: 'à¸¢à¸µà¹ˆà¸ªà¸´à¸š / à¸«à¹‰à¸²à¸ªà¸´à¸š / à¸«à¸™à¸¶à¹ˆà¸‡à¸£à¹‰à¸­à¸¢' },
                    { label: 'åƒè¬', zh: 'ä¸€åƒ / ä¸€è¬', en: 'One thousand / Ten thousand', jp: 'åƒ / ä¸€ä¸‡', kr: 'ì²œ / ë§Œ', th: 'à¸à¸±à¸™ / à¸«à¸¡à¸·à¹ˆà¸™' }
                ]
            },
            { id: 'num-time-now', category: 'numbers', zh: 'ç¾åœ¨å¹¾é»ï¼Ÿ', en: 'What time is it now?', jp: 'ä»Šä½•æ™‚ã§ã™ã‹ï¼Ÿ', kr: 'ì§€ê¸ˆ ëª‡ ì‹œì˜ˆìš”?', th: 'à¸•à¸­à¸™à¸™à¸µà¹‰à¸à¸µà¹ˆà¹‚à¸¡à¸‡?' },
            {
                id: 'num-time',
                category: 'numbers',
                isDynamic: true,
                title: '...é»é˜ (æ™‚é–“)',
                options: [
                    { label: 'æ—©ä¸Š', zh: 'æ—©ä¸Šå…«é»', en: '8 AM', jp: 'æœ8æ™‚', kr: 'ì•„ì¹¨ 8ì‹œ', th: '8 à¹‚à¸¡à¸‡à¹€à¸Šà¹‰à¸²' },
                    { label: 'ä¸­åˆ', zh: 'ä¸­åˆåäºŒé»', en: '12 PM (noon)', jp: 'æ­£åˆ12æ™‚', kr: 'ë‚® 12ì‹œ', th: '12 à¹‚à¸¡à¸‡à¹€à¸—à¸µà¹ˆà¸¢à¸‡' },
                    { label: 'ä¸‹åˆ', zh: 'ä¸‹åˆä¸‰é»', en: '3 PM', jp: 'åˆå¾Œ3æ™‚', kr: 'ì˜¤í›„ 3ì‹œ', th: '3 à¹‚à¸¡à¸‡à¹€à¸¢à¹‡à¸™' },
                    { label: 'æ™šä¸Š', zh: 'æ™šä¸Šä¸ƒé»', en: '7 PM', jp: 'å¤œ7æ™‚', kr: 'ì €ë… 7ì‹œ', th: '7 à¹‚à¸¡à¸‡à¹€à¸¢à¹‡à¸™' }
                ]
            },
            {
                id: 'num-day',
                category: 'numbers',
                isDynamic: true,
                title: 'æ—¥æœŸ',
                options: [
                    { label: 'ä»Šå¤©', zh: 'ä»Šå¤©', en: 'Today', jp: 'ä»Šæ—¥', kr: 'ì˜¤ëŠ˜', th: 'à¸§à¸±à¸™à¸™à¸µà¹‰' },
                    { label: 'æ˜å¤©', zh: 'æ˜å¤©', en: 'Tomorrow', jp: 'æ˜æ—¥', kr: 'ë‚´ì¼', th: 'à¸à¸£à¸¸à¹ˆà¸‡à¸™à¸µà¹‰' },
                    { label: 'æ˜¨å¤©', zh: 'æ˜¨å¤©', en: 'Yesterday', jp: 'æ˜¨æ—¥', kr: 'ì–´ì œ', th: 'à¹€à¸¡à¸·à¹ˆà¸­à¸§à¸²à¸™' }
                ]
            },
            {
                id: 'num-week',
                category: 'numbers',
                isDynamic: true,
                title: 'æ˜ŸæœŸ',
                options: [
                    { label: 'é€±ä¸€~ä¸‰', zh: 'æ˜ŸæœŸä¸€ / äºŒ / ä¸‰', en: 'Monday / Tuesday / Wednesday', jp: 'æœˆæ›œæ—¥ / ç«æ›œæ—¥ / æ°´æ›œæ—¥', kr: 'ì›”ìš”ì¼ / í™”ìš”ì¼ / ìˆ˜ìš”ì¼', th: 'à¸§à¸±à¸™à¸ˆà¸±à¸™à¸—à¸£à¹Œ / à¸­à¸±à¸‡à¸„à¸²à¸£ / à¸à¸¸à¸˜' },
                    { label: 'é€±å››~å…­', zh: 'æ˜ŸæœŸå›› / äº” / å…­', en: 'Thursday / Friday / Saturday', jp: 'æœ¨æ›œæ—¥ / é‡‘æ›œæ—¥ / åœŸæ›œæ—¥', kr: 'ëª©ìš”ì¼ / ê¸ˆìš”ì¼ / í† ìš”ì¼', th: 'à¸§à¸±à¸™à¸à¸¤à¸«à¸±à¸ª / à¸¨à¸¸à¸à¸£à¹Œ / à¹€à¸ªà¸²à¸£à¹Œ' },
                    { label: 'é€±æ—¥', zh: 'æ˜ŸæœŸæ—¥', en: 'Sunday', jp: 'æ—¥æ›œæ—¥', kr: 'ì¼ìš”ì¼', th: 'à¸§à¸±à¸™à¸­à¸²à¸—à¸´à¸•à¸¢à¹Œ' }
                ]
            }
        ];

        // åˆ†é¡è¨­å®š (æ–°å¢"å¸¸ç”¨")
        const categories = [
            { id: 'favorites', name: 'å¸¸ç”¨', icon: 'fa-star' },
            { id: 'all', name: 'å…¨éƒ¨', icon: 'fa-list' },
            { id: 'interaction', name: 'äº’å‹•', icon: 'fa-comments' },
            { id: 'sightseeing', name: 'è§€å…‰', icon: 'fa-camera' },
            { id: 'dining', name: 'é¤å»³', icon: 'fa-utensils' },
            { id: 'shopping', name: 'è³¼ç‰©', icon: 'fa-cart-shopping' },
            { id: 'emergency', name: 'ç·Šæ€¥', icon: 'fa-truck-medical' },
            { id: 'basic', name: 'åŸºç¤', icon: 'fa-user' },
            { id: 'transport', name: 'äº¤é€š', icon: 'fa-train-subway' },
            { id: 'hotel', name: 'ä½å®¿', icon: 'fa-hotel' },
            { id: 'numbers', name: 'æ•¸å­—', icon: 'fa-hashtag' }
        ];

        let currentCategory = 'all';
        let activePhraseData = null; 
        let originalDynamicItem = null;
        let searchQuery = '';
        
        // è®€å–æˆ‘çš„æœ€æ„›
        let favorites = JSON.parse(localStorage.getItem('traveltalk_favorites')) || [];

        document.addEventListener('DOMContentLoaded', () => {
            renderCategories();
            renderList();
        });

        // æœå°‹åŠŸèƒ½
        function handleSearch() {
            const input = document.getElementById('search-input');
            const clearBtn = document.getElementById('clear-search');
            searchQuery = input.value.trim().toLowerCase();
            
            // é¡¯ç¤º/éš±è—æ¸…é™¤æŒ‰éˆ•
            if (searchQuery) {
                clearBtn.classList.remove('hidden');
            } else {
                clearBtn.classList.add('hidden');
            }

            renderList();
        }

        function clearSearch() {
            const input = document.getElementById('search-input');
            input.value = '';
            handleSearch();
        }

        // æ”¶è—åŠŸèƒ½ (Toggle)
        function toggleFavorite(id, event) {
            // é˜»æ­¢å†’æ³¡ï¼Œé¿å…è§¸ç™¼å¡ç‰‡é»æ“Š
            if (event) event.stopPropagation();

            if (favorites.includes(id)) {
                favorites = favorites.filter(favId => favId !== id);
            } else {
                favorites.push(id);
            }
            
            // å„²å­˜åˆ° LocalStorage
            localStorage.setItem('traveltalk_favorites', JSON.stringify(favorites));
            
            renderList(); // é‡æ–°æ¸²æŸ“ä»¥æ›´æ–°æ˜Ÿæ˜Ÿç‹€æ…‹å’Œæ’åº
        }

        function renderCategories() {
            const container = document.getElementById('category-container');
            container.innerHTML = categories.map(cat => {
                const isActive = currentCategory === cat.id;
                // ç‰¹æ®Šæ¨£å¼çµ¦"å¸¸ç”¨"
                const activeClass = cat.id === 'favorites' 
                    ? (isActive ? 'bg-yellow-500 text-white shadow-md' : 'bg-yellow-100 text-yellow-700 hover:bg-yellow-200')
                    : (isActive ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-200 text-gray-600 hover:bg-gray-300');

                return `
                <button onclick="setCategory('${cat.id}')"
                    class="px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition flex items-center gap-2 select-none ${activeClass}">
                    <i class="fa-solid ${cat.icon}"></i> ${cat.name}
                </button>
            `}).join('');
        }

        function setCategory(id) {
            currentCategory = id;
            // æ¸…é™¤æœå°‹ (åˆ‡æ›åˆ†é¡æ™‚é€šå¸¸å¸Œæœ›é‡ç½®æœå°‹ï¼Œæˆ–è€…ä½ å¯ä»¥ä¿ç•™)
            // é€™è£¡é¸æ“‡ä¸æ¸…é™¤æœå°‹ï¼Œè®“ä½¿ç”¨è€…å¯ä»¥åœ¨åˆ†é¡ä¸­æœå°‹
            renderCategories();
            renderList();
        }

        function renderList() {
            const list = document.getElementById('content-list');
            let items = phrases;

            // 1. å…ˆéæ¿¾åˆ†é¡
            if (currentCategory === 'favorites') {
                items = items.filter(p => favorites.includes(p.id));
            } else if (currentCategory !== 'all') {
                items = items.filter(p => p.category === currentCategory);
            }

            // 2. å†éæ¿¾æœå°‹é—œéµå­—
            if (searchQuery) {
                items = items.filter(p => {
                    const searchContent = [
                        p.zh, p.en, p.jp, p.kr, p.th, p.title,
                        // å¦‚æœæ˜¯å‹•æ…‹å¡ç‰‡ï¼Œä¹Ÿè¦æœå°‹è£¡é¢çš„é¸é …
                        ...(p.isDynamic ? p.options.map(o => o.label + o.zh + o.en) : [])
                    ].join(' ').toLowerCase();
                    return searchContent.includes(searchQuery);
                });
            }
            
            // 3. æ’åºé‚è¼¯
            const categoryOrder = { 'interaction': 1, 'sightseeing': 2, 'dining': 3, 'shopping': 4, 'emergency': 5 };
            
            items.sort((a, b) => {
                const aFav = favorites.includes(a.id);
                const bFav = favorites.includes(b.id);

                // è¦å‰‡A: åœ¨ä»»ä½•åˆ—è¡¨ä¸­ï¼Œå·²æ”¶è—çš„é …ç›®æ°¸é ç½®é ‚
                if (aFav && !bFav) return -1;
                if (!aFav && bFav) return 1;

                // è¦å‰‡B: æ­£å¸¸çš„åˆ†é¡æ’åº (åƒ…åœ¨ All æ¨¡å¼ä¸‹ç”Ÿæ•ˆ)
                if (currentCategory === 'all') {
                    const orderA = categoryOrder[a.category] || 99;
                    const orderB = categoryOrder[b.category] || 99;
                    if (orderA !== orderB) return orderA - orderB;
                }
                
                // è¦å‰‡C: å‹•æ…‹å¡ç‰‡å„ªå…ˆ
                return (b.isDynamic ? 1 : 0) - (a.isDynamic ? 1 : 0);
            });

            if (items.length === 0) {
                const emptyMsg = currentCategory === 'favorites' 
                    ? 'é‚„æ²’æœ‰åŠ å…¥å¸¸ç”¨å°è©±<br><span class="text-xs">é»æ“Šæ˜Ÿæ˜Ÿåœ–ç¤ºå³å¯åŠ å…¥</span>' 
                    : 'æ²’æœ‰æ‰¾åˆ°ç›¸é—œå…§å®¹';
                list.innerHTML = `<div class="text-center text-gray-400 mt-20"><p>${emptyMsg}</p></div>`;
                return;
            }

            list.innerHTML = items.map((item) => {
                const displayTitle = item.isDynamic ? item.title : item.zh;
                const subTitle = item.isDynamic ? 'é»æ“Šåˆ‡æ›å¤šç¨®é¸é …' : item.en;
                
                // æª¢æŸ¥æ˜¯å¦æ”¶è—
                const isFav = favorites.includes(item.id);
                const starIconClass = isFav ? "fa-solid fa-star text-yellow-500" : "fa-regular fa-star text-gray-400 hover:text-yellow-500";
                
                let borderClass = 'border border-gray-100';
                // å¦‚æœå·²æ”¶è—ï¼Œçµ¦å€‹é‡‘è‰²é‚Šæ¡†æç¤º
                if (isFav) {
                    borderClass = 'border-l-4 border-l-yellow-400 border-y border-r border-yellow-100 bg-yellow-50/50';
                } else {
                    if (item.category === 'interaction') borderClass = 'border-l-4 border-l-blue-400 border-y border-r border-gray-100';
                    if (item.category === 'sightseeing') borderClass = 'border-l-4 border-l-purple-500 border-y border-r border-gray-100';
                    if (item.category === 'dining') borderClass = 'border-l-4 border-l-orange-400 border-y border-r border-gray-100';
                    if (item.category === 'emergency') borderClass = 'border-l-4 border-l-red-500 border-y border-r border-gray-100';
                    if (item.category === 'shopping') borderClass = 'border-l-4 border-l-green-400 border-y border-r border-gray-100'; 
                }
                
                // ç‚ºäº†å‚³éç‰©ä»¶ï¼Œæˆ‘å€‘é€™æ¬¡æ”¹ç”¨ ID æŸ¥æ‰¾
                // å› ç‚ºç¾åœ¨æœ‰æœå°‹éæ¿¾ï¼ŒåŸæœ¬çš„ index æœƒäº‚æ‰
                return `
                <div onclick="openModalById('${item.id}')" class="bg-white p-4 mb-3 rounded-xl shadow-sm ${borderClass} active:bg-gray-100 transition cursor-pointer flex justify-between items-center group select-none relative">
                    <div class="flex-1 pr-4">
                        <div class="flex items-center gap-2">
                            ${item.isDynamic ? '<i class="fa-solid fa-layer-group text-blue-500 text-xs"></i>' : ''}
                            <h3 class="text-lg font-bold text-gray-800 mb-1 leading-tight">${displayTitle}</h3>
                        </div>
                        <p class="text-xs text-gray-400 truncate font-medium">${subTitle}</p>
                    </div>
                    
                    <!-- æ”¶è—æŒ‰éˆ• (çµ•å°å®šä½åœ¨å³ä¸‹ï¼Œé¿å…èª¤è§¸å±•é–‹) -->
                    <div class="flex items-center gap-3">
                         <button onclick="toggleFavorite('${item.id}', event)" class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition z-10">
                            <i class="${starIconClass} text-lg transition-transform active:scale-125"></i>
                        </button>
                        <div class="text-blue-500 bg-blue-50 w-10 h-10 flex items-center justify-center rounded-full group-hover:bg-blue-600 group-hover:text-white transition shrink-0">
                            <i class="fa-solid ${item.isDynamic ? 'fa-sliders' : 'fa-expand'}"></i>
                        </div>
                    </div>
                </div>
            `}).join('');
        }

        // --- Modal Logic ---

        function openModalById(id) {
            const item = phrases.find(p => p.id === id);
            if (!item) return;

            const modal = document.getElementById('translation-modal');
            const switcher = document.getElementById('modal-switcher');
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');

            if (item.isDynamic) {
                originalDynamicItem = item;
                switcher.classList.remove('hidden');
                switcher.classList.add('grid');
                
                const count = item.options.length;
                let cols = 'grid-cols-3';
                if (count <= 2) cols = 'grid-cols-2';
                if (count >= 4) cols = 'grid-cols-4';
                
                switcher.className = `grid gap-2 mb-4 ${cols}`;

                switcher.innerHTML = item.options.map((opt, idx) => `
                    <button onclick="switchDynamicOption(${idx})" class="py-2 text-xs font-bold rounded border transition tab-inactive truncate">
                        ${opt.label}
                    </button>
                `).join('');

                switchDynamicOption(0);

            } else {
                originalDynamicItem = null;
                activePhraseData = item;
                switcher.classList.add('hidden');
                switcher.classList.remove('grid');
                updateModalText(item);
            }
        }

        function switchDynamicOption(subIndex) {
            if (!originalDynamicItem) return;
            
            const buttons = document.querySelectorAll('#modal-switcher button');
            buttons.forEach((btn, idx) => {
                if (idx === subIndex) {
                    btn.classList.remove('tab-inactive');
                    btn.classList.add('tab-active');
                } else {
                    btn.classList.add('tab-inactive');
                    btn.classList.remove('tab-active');
                }
            });

            activePhraseData = originalDynamicItem.options[subIndex];
            updateModalText(activePhraseData);
        }

        function updateModalText(data) {
            document.getElementById('modal-zh').textContent = data.zh;
            document.getElementById('modal-en').textContent = data.en;
            document.getElementById('modal-jp').textContent = data.jp;
            document.getElementById('modal-kr').textContent = data.kr;
            document.getElementById('modal-th').textContent = data.th || '';
        }

        function closeModal() {
            const modal = document.getElementById('translation-modal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            window.speechSynthesis.cancel();
        }
        
        let voices = [];
        let voiceAvailability = {
            'en-US': false,
            'ja-JP': false,
            'ko-KR': false,
            'th-TH': false
        };

        function loadVoices() {
            voices = window.speechSynthesis.getVoices();

            // æª¢æ¸¬å„èªè¨€æ˜¯å¦æœ‰å¯ç”¨èªéŸ³
            voiceAvailability['en-US'] = voices.some(v => v.lang.startsWith('en'));
            voiceAvailability['ja-JP'] = voices.some(v => v.lang.startsWith('ja'));
            voiceAvailability['ko-KR'] = voices.some(v => v.lang.startsWith('ko'));
            voiceAvailability['th-TH'] = voices.some(v => v.lang.startsWith('th'));

            updateVoiceIndicators();
        }

        function updateVoiceIndicators() {
            // åœ¨å½ˆçª—ä¸­é¡¯ç¤ºèªéŸ³å¯ç”¨æ€§ï¼ˆå¦‚æœéœ€è¦ï¼‰
            const indicators = {
                'en': voiceAvailability['en-US'],
                'ja': voiceAvailability['ja-JP'],
                'ko': voiceAvailability['ko-KR'],
                'th': voiceAvailability['th-TH']
            };
        }

        if ('speechSynthesis' in window) {
            loadVoices();
            if (window.speechSynthesis.onvoiceschanged !== undefined) {
                window.speechSynthesis.onvoiceschanged = loadVoices;
            }

            // Android è¨­å‚™éœ€è¦åˆæ¬¡ç”¨æˆ¶äº’å‹•ä¾†å•Ÿå‹• TTS
            document.addEventListener('click', function initTTS() {
                if (voices.length === 0) {
                    loadVoices();
                }
            }, { once: true });
        }

        function playAudio(lang) {
            if (!activePhraseData) return;

            // Android Chrome éœ€è¦å…ˆ cancel å†ç­‰ä¸€ä¸‹
            window.speechSynthesis.cancel();

            let text = '';
            let langCode = '';
            let langName = '';
            switch(lang) {
                case 'en':
                    text = activePhraseData.en;
                    langCode = 'en-US';
                    langName = 'è‹±æ–‡';
                    break;
                case 'ja':
                    text = activePhraseData.jp;
                    langCode = 'ja-JP';
                    langName = 'æ—¥æ–‡';
                    break;
                case 'ko':
                    text = activePhraseData.kr;
                    langCode = 'ko-KR';
                    langName = 'éŸ“æ–‡';
                    break;
                case 'th':
                    text = activePhraseData.th;
                    langCode = 'th-TH';
                    langName = 'æ³°æ–‡';
                    break;
            }

            if (!('speechSynthesis' in window)) {
                showVoiceWarning('æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´èªéŸ³æ’­æ”¾', 'è«‹ä½¿ç”¨ Chrome æˆ– Safari ç€è¦½å™¨');
                return;
            }

            // Android éœ€è¦ç¨å¾®å»¶é²
            const isAndroid = /Android/i.test(navigator.userAgent);
            const delay = isAndroid ? 150 : 0;

            setTimeout(() => {
                // ç¢ºä¿ voices å·²è¼‰å…¥
                if (voices.length === 0) {
                    voices = window.speechSynthesis.getVoices();
                    loadVoices(); // æ›´æ–°å¯ç”¨æ€§ç‹€æ…‹
                }

                // æª¢æŸ¥æ˜¯å¦æœ‰è©²èªè¨€çš„èªéŸ³åŒ…
                const hasVoice = voices.some(v => {
                    const vLang = v.lang.replace('_', '-');
                    return vLang === langCode || vLang.startsWith(langCode.split('-')[0]);
                });

                if (!hasVoice) {
                    showVoiceWarning(
                        `æ‚¨çš„è¨­å‚™æœªå®‰è£${langName}èªéŸ³åŒ…`,
                        isAndroid
                            ? `è«‹è‡³ï¼šè¨­å®š â†’ ç³»çµ± â†’ èªè¨€å’Œè¼¸å…¥æ³• â†’ æ–‡å­—è½‰èªéŸ³è¼¸å‡º\n\nä¸‹è¼‰ã€Œ${langName}ã€èªéŸ³å¼•æ“å¾Œé‡æ–°æ•´ç†ç¶²é `
                            : `è«‹è‡³ï¼šè¨­å®š â†’ è¼”åŠ©ä½¿ç”¨ â†’ èªéŸ³å…§å®¹ â†’ è²éŸ³\n\nä¸‹è¼‰ã€Œ${langName}ã€èªéŸ³åŒ…å¾Œé‡æ–°æ•´ç†ç¶²é `
                    );
                    return;
                }

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = langCode;
                utterance.rate = 0.9;
                utterance.pitch = 1.0;
                utterance.volume = 1.0;

                // å˜—è©¦æ‰¾åˆ°æœ€é©åˆçš„èªéŸ³ï¼ˆå„ªå…ˆéä¸­æ–‡èªéŸ³ï¼Œé¿å…ç”¨ä¸­æ–‡è®€å¤–èªï¼‰
                const targetVoice = voices.find(v => {
                    const vLang = v.lang.replace('_', '-');
                    // å®Œå…¨åŒ¹é…å„ªå…ˆ
                    if (vLang === langCode) return true;
                    // èªè¨€å‰ç¶´åŒ¹é…ï¼ˆå¦‚ en-US, en-GBï¼‰
                    if (vLang.startsWith(langCode.split('-')[0])) return true;
                    return false;
                });

                if (targetVoice) {
                    utterance.voice = targetVoice;
                    console.log(`ä½¿ç”¨èªéŸ³: ${targetVoice.name} (${targetVoice.lang})`);
                }

                // éŒ¯èª¤è™•ç†
                utterance.onerror = (event) => {
                    // "canceled" æ˜¯æ­£å¸¸æƒ…æ³ï¼ˆç”¨æˆ¶åˆ‡æ›èªè¨€æˆ–å¿«é€Ÿé»æ“Šï¼‰ï¼Œä¸éœ€è¦é¡¯ç¤ºéŒ¯èª¤
                    if (event.error === 'canceled') {
                        console.log('èªéŸ³æ’­æ”¾è¢«å–æ¶ˆï¼ˆæ­£å¸¸ï¼‰');
                        return;
                    }

                    // "interrupted" ä¹Ÿæ˜¯æ­£å¸¸æƒ…æ³ï¼ˆè¢«æ–°çš„æ’­æ”¾æ‰“æ–·ï¼‰
                    if (event.error === 'interrupted') {
                        console.log('èªéŸ³æ’­æ”¾è¢«ä¸­æ–·ï¼ˆæ­£å¸¸ï¼‰');
                        return;
                    }

                    console.error('èªéŸ³æ’­æ”¾éŒ¯èª¤:', event);

                    if (event.error === 'not-allowed') {
                        showVoiceWarning('ç„¡æ³•æ’­æ”¾è²éŸ³', 'è«‹ç¢ºèªå·²å…è¨±ç¶²é æ’­æ”¾è²éŸ³');
                    } else if (event.error === 'language-unavailable') {
                        showVoiceWarning(
                            `${langName}èªéŸ³ä¸å¯ç”¨`,
                            'è«‹åœ¨ç³»çµ±è¨­å®šä¸­ä¸‹è¼‰å°æ‡‰çš„èªéŸ³åŒ…'
                        );
                    } else if (event.error === 'network') {
                        showVoiceWarning('ç¶²è·¯éŒ¯èª¤', 'è«‹æª¢æŸ¥ç¶²è·¯é€£ç·šå¾Œé‡è©¦');
                    } else if (event.error === 'synthesis-failed') {
                        showVoiceWarning('æ’­æ”¾å¤±æ•—', 'èªéŸ³åˆæˆå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
                    } else {
                        // å…¶ä»–æœªçŸ¥éŒ¯èª¤æ‰é¡¯ç¤º
                        showVoiceWarning('æ’­æ”¾å¤±æ•—', `éŒ¯èª¤ä»£ç¢¼: ${event.error}`);
                    }
                };

                // æ’­æ”¾é–‹å§‹äº‹ä»¶ï¼ˆç”¨æ–¼é™¤éŒ¯ï¼‰
                utterance.onstart = () => {
                    console.log(`é–‹å§‹æ’­æ”¾: ${text}`);
                };

                // Android Chrome çš„ workaround
                if (isAndroid) {
                    window.speechSynthesis.resume();
                }

                window.speechSynthesis.speak(utterance);

            }, delay);
        }

        // é¡¯ç¤ºè‡ªå‹•æ¶ˆå¤±çš„ Toast é€šçŸ¥
        function showVoiceWarning(title, message) {
            const toastId = 'toast-' + Date.now();
            const toastHtml = `
                <div id="${toastId}" class="fixed top-20 left-1/2 transform -translate-x-1/2 z-[60] max-w-sm w-[calc(100%-2rem)] mx-auto opacity-0 transition-all duration-300">
                    <div class="bg-white rounded-xl p-4 shadow-2xl border border-gray-200">
                        <div class="flex items-start gap-3">
                            <div class="flex-shrink-0 w-6 h-6 flex items-center justify-center rounded-full bg-orange-100">
                                <i class="fa-solid fa-exclamation text-orange-600 text-sm"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <h4 class="text-sm font-bold text-gray-800 mb-1">${title}</h4>
                                <p class="text-xs text-gray-600 leading-relaxed whitespace-pre-line">${message}</p>
                            </div>
                            <button onclick="document.getElementById('${toastId}').remove()" class="flex-shrink-0 text-gray-400 hover:text-gray-600">
                                <i class="fa-solid fa-xmark text-sm"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', toastHtml);

            const toast = document.getElementById(toastId);

            // æ·¡å…¥å‹•ç•«
            setTimeout(() => {
                toast.style.opacity = '1';
                toast.style.top = '5rem';
            }, 10);

            // 4 ç§’å¾Œè‡ªå‹•æ¶ˆå¤±
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.top = '4rem';
                setTimeout(() => toast.remove(), 300);
            }, 4000);
        }
        
        // æª¢æ¸¬èªéŸ³åŒ…å¯ç”¨æ€§
        function checkVoiceAvailability() {
            // ç¢ºä¿ voices å·²è¼‰å…¥
            if (voices.length === 0) {
                voices = window.speechSynthesis.getVoices();
                loadVoices();
            }

            const langTests = [
                { code: 'en-US', name: 'è‹±æ–‡ (English)', prefix: 'en' },
                { code: 'ja-JP', name: 'æ—¥æ–‡ (æ—¥æœ¬èª)', prefix: 'ja' },
                { code: 'ko-KR', name: 'éŸ“æ–‡ (í•œêµ­ì–´)', prefix: 'ko' },
                { code: 'th-TH', name: 'æ³°æ–‡ (à¹„à¸—à¸¢)', prefix: 'th' }
            ];

            let resultsHtml = '<div class="space-y-2 text-left mb-4">';

            langTests.forEach(lang => {
                const hasVoice = voices.some(v => {
                    const vLang = v.lang.replace('_', '-');
                    return vLang === lang.code || vLang.startsWith(lang.prefix);
                });

                const voiceList = voices
                    .filter(v => v.lang.replace('_', '-').startsWith(lang.prefix))
                    .map(v => v.name)
                    .slice(0, 2);

                const icon = hasVoice
                    ? '<i class="fa-solid fa-circle-check text-green-500"></i>'
                    : '<i class="fa-solid fa-circle-xmark text-red-500"></i>';

                const status = hasVoice
                    ? `<span class="text-green-700 font-bold">å·²å®‰è£</span>`
                    : `<span class="text-red-600 font-bold">æœªå®‰è£</span>`;

                const details = hasVoice && voiceList.length > 0
                    ? `<div class="text-[10px] text-gray-500 ml-6 mt-1">å¯ç”¨: ${voiceList.join(', ')}</div>`
                    : '';

                resultsHtml += `
                    <div class="flex items-start gap-2 p-2 rounded bg-gray-50">
                        <div class="mt-0.5">${icon}</div>
                        <div class="flex-1">
                            <div class="text-sm font-medium text-gray-800">${lang.name}</div>
                            <div class="text-xs">${status}</div>
                            ${details}
                        </div>
                    </div>
                `;
            });

            resultsHtml += '</div>';

            const isAndroid = /Android/i.test(navigator.userAgent);
            const deviceTip = isAndroid
                ? '<p class="text-xs text-gray-600 mb-3">Android ç”¨æˆ¶è«‹è‡³ï¼š<br><b>è¨­å®š â†’ ç³»çµ± â†’ èªè¨€å’Œè¼¸å…¥æ³• â†’ æ–‡å­—è½‰èªéŸ³è¼¸å‡º</b><br>ä¸‹è¼‰ Google æ–‡å­—è½‰èªéŸ³å¼•æ“èˆ‡å°æ‡‰èªè¨€</p>'
                : '<p class="text-xs text-gray-600 mb-3">iPhone ç”¨æˆ¶è«‹è‡³ï¼š<br><b>è¨­å®š â†’ è¼”åŠ©ä½¿ç”¨ â†’ èªéŸ³å…§å®¹ â†’ è²éŸ³</b><br>ä¸‹è¼‰å°æ‡‰èªè¨€çš„èªéŸ³åŒ…</p>';

            const totalAvailable = langTests.filter(lang =>
                voices.some(v => v.lang.replace('_', '-').startsWith(lang.prefix))
            ).length;

            const alertHtml = `
                <div id="voice-check-result" class="fixed inset-0 z-[70] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4">
                    <div class="bg-white rounded-xl p-6 max-w-md w-full shadow-2xl max-h-[90vh] overflow-y-auto">
                        <h3 class="text-xl font-bold text-gray-800 mb-2">èªéŸ³åŒ…æª¢æ¸¬çµæœ</h3>
                        <p class="text-sm text-gray-600 mb-4">å…±åµæ¸¬åˆ° ${totalAvailable}/4 ç¨®èªè¨€å¯ç”¨</p>

                        ${resultsHtml}

                        ${deviceTip}

                        <p class="text-xs text-gray-500 mb-4">*ä¸‹è¼‰èªéŸ³åŒ…å¾Œè«‹é‡æ–°æ•´ç†ç¶²é </p>

                        <button onclick="document.getElementById('voice-check-result').remove()"
                            class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg">
                            é—œé–‰
                        </button>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', alertHtml);
        }

        // Added showInfo function to fix ReferenceError
        function showInfo() {
            document.getElementById('info-modal').classList.remove('hidden');
        }
    </script>
</body>
</html>
